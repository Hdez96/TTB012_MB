/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.rpldy=t(require("react"),require("react-dom")):e.rpldy=t(e.react,e["react-dom"])}(window,(function(e,t){return function(e){function t(t){for(var r,a,i=t[0],c=t[1],l=t[2],s=0,f=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(u,a)&&u[a]&&f.push(u[a][0]),u[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==u[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},u={main:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;return o.push(["MIuT","polyfills"]),n()}({"10TY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return o}));var r="__rupy-logger-debug__",u={ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},o={ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"}},MIuT:function(e,t,n){"use strict";n.r(t),n.d(t,"chunkedSender",(function(){return a})),n.d(t,"lifeEvents",(function(){return i})),n.d(t,"mockSender",(function(){return c})),n.d(t,"retry",(function(){return d})),n.d(t,"safeStorage",(function(){return s})),n.d(t,"sender",(function(){return u})),n.d(t,"shared",(function(){return r})),n.d(t,"simpleState",(function(){return o})),n.d(t,"tusSender",(function(){return f})),n.d(t,"uploader",(function(){return l})),n.d(t,"chunkedUploady",(function(){return g})),n.d(t,"retryHooks",(function(){return h})),n.d(t,"sharedUi",(function(){return p})),n.d(t,"tusUploady",(function(){return b})),n.d(t,"uploadButton",(function(){return m})),n.d(t,"uploadDropZone",(function(){return S})),n.d(t,"uploadPreview",(function(){return E})),n.d(t,"uploadUrlInput",(function(){return y})),n.d(t,"uploady",(function(){return v}));var r={};n.r(r),n.d(r,"BATCH_STATES",(function(){return C.a})),n.d(r,"FILE_STATES",(function(){return C.c})),n.d(r,"invariant",(function(){return R.a})),n.d(r,"throttle",(function(){return L.a})),n.d(r,"logger",(function(){return T})),n.d(r,"triggerCancellable",(function(){return P})),n.d(r,"triggerUpdater",(function(){return j})),n.d(r,"createBatchItem",(function(){return K})),n.d(r,"request",(function(){return oe})),n.d(r,"parseResponseHeaders",(function(){return ue})),n.d(r,"isFunction",(function(){return ae.e})),n.d(r,"isPlainObject",(function(){return ae.f})),n.d(r,"isSamePropInArrays",(function(){return ae.h})),n.d(r,"devFreeze",(function(){return ae.b})),n.d(r,"merge",(function(){return ae.i})),n.d(r,"getMerge",(function(){return ae.c})),n.d(r,"clone",(function(){return ae.a})),n.d(r,"pick",(function(){return ae.j})),n.d(r,"hasWindow",(function(){return ae.d})),n.d(r,"isProduction",(function(){return ae.g}));var u={};n.r(u),n.d(u,"default",(function(){return ke})),n.d(u,"send",(function(){return Ue})),n.d(u,"getXhrSend",(function(){return _e})),n.d(u,"XHR_SENDER_TYPE",(function(){return pe})),n.d(u,"MissingUrlError",(function(){return Oe}));var o={};n.r(o),n.d(o,"default",(function(){return ut})),n.d(o,"createState",(function(){return ut})),n.d(o,"unwrap",(function(){return rt})),n.d(o,"isProxy",(function(){return Ze})),n.d(o,"isProxiable",(function(){return Je}));var a={};n.r(a),n.d(a,"default",(function(){return Et})),n.d(a,"CHUNK_EVENTS",(function(){return ot})),n.d(a,"CHUNKING_SUPPORT",(function(){return je})),n.d(a,"CHUNKED_SENDER_TYPE",(function(){return at})),n.d(a,"CHUNKED_DEFAULT_OPTIONS",(function(){return Pe})),n.d(a,"getChunkedEnhancer",(function(){return St})),n.d(a,"createChunkedSender",(function(){return mt})),n.d(a,"getChunkDataFromFile",(function(){return Be}));var i={};n.r(i),n.d(i,"default",(function(){return cn})),n.d(i,"addLife",(function(){return cn})),n.d(i,"isLE",(function(){return Qt})),n.d(i,"createLifePack",(function(){return ln}));var c={};n.r(c),n.d(c,"default",(function(){return bn})),n.d(c,"MOCK_SENDER_TYPE",(function(){return dn})),n.d(c,"createMockSender",(function(){return gn})),n.d(c,"getMockSenderEnhancer",(function(){return hn}));var l={};n.r(l),n.d(l,"default",(function(){return ur})),n.d(l,"UPLOADER_EVENTS",(function(){return mn})),n.d(l,"DEFAULT_OPTIONS",(function(){return Xn})),n.d(l,"composeEnhancers",(function(){return rr})),n.d(l,"createUploader",(function(){return nr})),n.d(l,"send",(function(){return Ue})),n.d(l,"getXhrSend",(function(){return _e})),n.d(l,"XHR_SENDER_TYPE",(function(){return pe})),n.d(l,"MissingUrlError",(function(){return Oe}));var d={};n.r(d),n.d(d,"default",(function(){return lr})),n.d(d,"retryEnhancer",(function(){return lr})),n.d(d,"RETRY_EVENT",(function(){return ar})),n.d(d,"RETRY_EXT",(function(){return or}));var s={};n.r(s),n.d(s,"safeLocalStorage",(function(){return pr})),n.d(s,"safeSessionStorage",(function(){return vr}));var f={};n.r(f),n.d(f,"CHUNKING_SUPPORT",(function(){return je})),n.d(f,"TUS_SENDER_TYPE",(function(){return Cr})),n.d(f,"getTusEnhancer",(function(){return $r})),n.d(f,"clearResumables",(function(){return Or})),n.d(f,"TUS_EXT",(function(){return Lr})),n.d(f,"default",(function(){return eu}));var p={};n.r(p),n.d(p,"useBatchAddListener",(function(){return gu})),n.d(p,"useBatchStartListener",(function(){return hu})),n.d(p,"useBatchProgressListener",(function(){return Eu})),n.d(p,"useBatchFinishListener",(function(){return bu})),n.d(p,"useBatchCancelledListener",(function(){return mu})),n.d(p,"useBatchAbortListener",(function(){return Su})),n.d(p,"useItemStartListener",(function(){return yu})),n.d(p,"useItemFinishListener",(function(){return Ou})),n.d(p,"useItemProgressListener",(function(){return Tu})),n.d(p,"useItemCancelListener",(function(){return Ru})),n.d(p,"useItemErrorListener",(function(){return Iu})),n.d(p,"useItemAbortListener",(function(){return Lu})),n.d(p,"useItemFinalizeListener",(function(){return Cu})),n.d(p,"useRequestPreSend",(function(){return Du})),n.d(p,"generateUploaderEventHook",(function(){return pu})),n.d(p,"generateUploaderEventHookWithState",(function(){return fu})),n.d(p,"logWarning",(function(){return vu})),n.d(p,"assertContext",(function(){return lu})),n.d(p,"useUploadOptions",(function(){return wu})),n.d(p,"useAbortItem",(function(){return Au})),n.d(p,"useAbortBatch",(function(){return _u})),n.d(p,"useAbortAll",(function(){return Uu})),n.d(p,"NoDomUploady",(function(){return ku})),n.d(p,"UploadyContext",(function(){return cu})),n.d(p,"createContextApi",(function(){return iu})),n.d(p,"withRequestPreSendUpdate",(function(){return Pu})),n.d(p,"useUploadyContext",(function(){return du}));var v={};n.r(v),n.d(v,"default",(function(){return Gu})),n.d(v,"useFileInput",(function(){return zu})),n.d(v,"Uploady",(function(){return xu})),n.d(v,"UPLOADER_EVENTS",(function(){return mn})),n.d(v,"DEFAULT_OPTIONS",(function(){return Xn})),n.d(v,"composeEnhancers",(function(){return rr})),n.d(v,"createUploader",(function(){return nr})),n.d(v,"send",(function(){return Ue})),n.d(v,"getXhrSend",(function(){return _e})),n.d(v,"XHR_SENDER_TYPE",(function(){return pe})),n.d(v,"MissingUrlError",(function(){return Oe})),n.d(v,"useBatchAddListener",(function(){return gu})),n.d(v,"useBatchStartListener",(function(){return hu})),n.d(v,"useBatchProgressListener",(function(){return Eu})),n.d(v,"useBatchFinishListener",(function(){return bu})),n.d(v,"useBatchCancelledListener",(function(){return mu})),n.d(v,"useBatchAbortListener",(function(){return Su})),n.d(v,"useItemStartListener",(function(){return yu})),n.d(v,"useItemFinishListener",(function(){return Ou})),n.d(v,"useItemProgressListener",(function(){return Tu})),n.d(v,"useItemCancelListener",(function(){return Ru})),n.d(v,"useItemErrorListener",(function(){return Iu})),n.d(v,"useItemAbortListener",(function(){return Lu})),n.d(v,"useItemFinalizeListener",(function(){return Cu})),n.d(v,"useRequestPreSend",(function(){return Du})),n.d(v,"generateUploaderEventHook",(function(){return pu})),n.d(v,"generateUploaderEventHookWithState",(function(){return fu})),n.d(v,"logWarning",(function(){return vu})),n.d(v,"assertContext",(function(){return lu})),n.d(v,"useUploadOptions",(function(){return wu})),n.d(v,"useAbortItem",(function(){return Au})),n.d(v,"useAbortBatch",(function(){return _u})),n.d(v,"useAbortAll",(function(){return Uu})),n.d(v,"NoDomUploady",(function(){return ku})),n.d(v,"UploadyContext",(function(){return cu})),n.d(v,"createContextApi",(function(){return iu})),n.d(v,"withRequestPreSendUpdate",(function(){return Pu})),n.d(v,"useUploadyContext",(function(){return du}));var g={};n.r(g),n.d(g,"default",(function(){return Qu})),n.d(g,"ChunkedUploady",(function(){return Ku})),n.d(g,"CHUNK_EVENTS",(function(){return ot})),n.d(g,"useFileInput",(function(){return zu})),n.d(g,"Uploady",(function(){return xu})),n.d(g,"UPLOADER_EVENTS",(function(){return mn})),n.d(g,"DEFAULT_OPTIONS",(function(){return Xn})),n.d(g,"composeEnhancers",(function(){return rr})),n.d(g,"createUploader",(function(){return nr})),n.d(g,"send",(function(){return Ue})),n.d(g,"getXhrSend",(function(){return _e})),n.d(g,"XHR_SENDER_TYPE",(function(){return pe})),n.d(g,"MissingUrlError",(function(){return Oe})),n.d(g,"useBatchAddListener",(function(){return gu})),n.d(g,"useBatchStartListener",(function(){return hu})),n.d(g,"useBatchProgressListener",(function(){return Eu})),n.d(g,"useBatchFinishListener",(function(){return bu})),n.d(g,"useBatchCancelledListener",(function(){return mu})),n.d(g,"useBatchAbortListener",(function(){return Su})),n.d(g,"useItemStartListener",(function(){return yu})),n.d(g,"useItemFinishListener",(function(){return Ou})),n.d(g,"useItemProgressListener",(function(){return Tu})),n.d(g,"useItemCancelListener",(function(){return Ru})),n.d(g,"useItemErrorListener",(function(){return Iu})),n.d(g,"useItemAbortListener",(function(){return Lu})),n.d(g,"useItemFinalizeListener",(function(){return Cu})),n.d(g,"useRequestPreSend",(function(){return Du})),n.d(g,"generateUploaderEventHook",(function(){return pu})),n.d(g,"generateUploaderEventHookWithState",(function(){return fu})),n.d(g,"logWarning",(function(){return vu})),n.d(g,"assertContext",(function(){return lu})),n.d(g,"useUploadOptions",(function(){return wu})),n.d(g,"useAbortItem",(function(){return Au})),n.d(g,"useAbortBatch",(function(){return _u})),n.d(g,"useAbortAll",(function(){return Uu})),n.d(g,"NoDomUploady",(function(){return ku})),n.d(g,"UploadyContext",(function(){return cu})),n.d(g,"createContextApi",(function(){return iu})),n.d(g,"withRequestPreSendUpdate",(function(){return Pu})),n.d(g,"useUploadyContext",(function(){return du})),n.d(g,"useChunkStartListener",(function(){return Xu})),n.d(g,"useChunkFinishListener",(function(){return Wu}));var h={};n.r(h),n.d(h,"default",(function(){return $u})),n.d(h,"RETRY_EVENT",(function(){return ar})),n.d(h,"retryEnhancer",(function(){return lr})),n.d(h,"useRetry",(function(){return Yu})),n.d(h,"useBatchRetry",(function(){return Zu})),n.d(h,"useRetryListener",(function(){return Ju}));var b={};n.r(b),n.d(b,"default",(function(){return no})),n.d(b,"TusUploady",(function(){return eo})),n.d(b,"useClearResumableStore",(function(){return to})),n.d(b,"useFileInput",(function(){return zu})),n.d(b,"Uploady",(function(){return xu})),n.d(b,"UPLOADER_EVENTS",(function(){return mn})),n.d(b,"DEFAULT_OPTIONS",(function(){return Xn})),n.d(b,"composeEnhancers",(function(){return rr})),n.d(b,"createUploader",(function(){return nr})),n.d(b,"send",(function(){return Ue})),n.d(b,"getXhrSend",(function(){return _e})),n.d(b,"XHR_SENDER_TYPE",(function(){return pe})),n.d(b,"MissingUrlError",(function(){return Oe})),n.d(b,"useBatchAddListener",(function(){return gu})),n.d(b,"useBatchStartListener",(function(){return hu})),n.d(b,"useBatchProgressListener",(function(){return Eu})),n.d(b,"useBatchFinishListener",(function(){return bu})),n.d(b,"useBatchCancelledListener",(function(){return mu})),n.d(b,"useBatchAbortListener",(function(){return Su})),n.d(b,"useItemStartListener",(function(){return yu})),n.d(b,"useItemFinishListener",(function(){return Ou})),n.d(b,"useItemProgressListener",(function(){return Tu})),n.d(b,"useItemCancelListener",(function(){return Ru})),n.d(b,"useItemErrorListener",(function(){return Iu})),n.d(b,"useItemAbortListener",(function(){return Lu})),n.d(b,"useItemFinalizeListener",(function(){return Cu})),n.d(b,"useRequestPreSend",(function(){return Du})),n.d(b,"generateUploaderEventHook",(function(){return pu})),n.d(b,"generateUploaderEventHookWithState",(function(){return fu})),n.d(b,"logWarning",(function(){return vu})),n.d(b,"assertContext",(function(){return lu})),n.d(b,"useUploadOptions",(function(){return wu})),n.d(b,"useAbortItem",(function(){return Au})),n.d(b,"useAbortBatch",(function(){return _u})),n.d(b,"useAbortAll",(function(){return Uu})),n.d(b,"NoDomUploady",(function(){return ku})),n.d(b,"UploadyContext",(function(){return cu})),n.d(b,"createContextApi",(function(){return iu})),n.d(b,"withRequestPreSendUpdate",(function(){return Pu})),n.d(b,"useUploadyContext",(function(){return du}));var m={};n.r(m),n.d(m,"default",(function(){return oo})),n.d(m,"UploadButton",(function(){return uo})),n.d(m,"asUploadButton",(function(){return ro}));var S={};n.r(S),n.d(S,"default",(function(){return co})),n.d(S,"UploadDropZone",(function(){return io}));var E={};n.r(E),n.d(E,"PREVIEW_TYPES",(function(){return lo})),n.d(E,"default",(function(){return So})),n.d(E,"UploadPreview",(function(){return mo}));var y={};n.r(y),n.d(y,"default",(function(){return Oo})),n.d(y,"UploadUrlInput",(function(){return yo}));var O=n("kvau"),R=n.n(O),I=n("uDTZ"),L=n.n(I),C=n("10TY"),T=n("ytft"),D=n("TEMH"),w=n.n(D),A=n("o+MX"),_=n.n(A),U=n("OBge"),k=n.n(U),P=function(e,t){for(var n,r=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return new k.a((function(n,u){var o,a=e.apply(void 0,_()(o=[t]).call(o,r));a&&a.length?k.a.all(a).catch(u).then((function(e){return e&&n(!!~w()(e).call(e,(function(e){return!1===e})))})):n(!1)}))},u=arguments.length,o=new Array(u>2?u-2:0),a=2;a<u;a++)o[a-2]=arguments[a];return t?r.apply(void 0,_()(n=[t]).call(n,o)):r},N=function(e){return null==e},j=function(e,t){for(var n,r=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return new k.a((function(n,u){var o,a=e.apply(void 0,_()(o=[t]).call(o,r));a&&a.length?k.a.all(a).catch(u).then((function(e){var t;if(e)for(;N(t)&&e.length;)t=e.pop();n(N(t)?void 0:t)})):n()}))},u=arguments.length,o=new Array(u>2?u-2:0),a=2;a<u;a++)o[a-2]=arguments[a];return t?r.apply(void 0,_()(n=[t]).call(n,o)):r},B=n("LYCE"),H=n.n(B),x=n("nhkr"),F=n.n(x),M=n("CtDf"),q=n.n(M),z=q()("__rpldy-bi__"),G=0,K=function(e,t){var n;G+=1;var r={id:e.id&&e.batchId?e.id:_()(n="".concat(t,".item-")).call(n,G),batchId:t,state:C.c.ADDED,completed:0,loaded:0,aborted:!1,recycled:!1,previousBatch:null};if(H()(r,z,{value:!0,writable:!0}),"object"===F()(e)&&!0===e[z]&&(r.recycled=!0,r.previousBatch=e.batchId,e=e.file||e.url),"string"==typeof e)r=function(e,t){return e.url=t,e}(r,e);else{if(!function(e){return e&&(e instanceof Blob||e instanceof File||"object"===F()(e)&&e.name&&e.type)}(e))throw new Error("Unknown type of file added: ".concat(F()(e)));r=function(e,t){return e.file=t,e}(r,e)}return r},X=n("+oHS"),W=n.n(X),Q=n("RXMP"),V=n.n(Q),Y=function(e,t){var n;t&&V()(n=W()(t)).call(n,(function(n){void 0!==t[n]&&e.setRequestHeader(n,t[n])}))},Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,u=new k.a((function(u,o){r.onerror=function(){return o(r)},r.ontimeout=function(){return o(r)},r.onabort=function(){return o(r)},r.onload=function(){return u(r)},r.open(n.method||"GET",e),Y(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(t)}));return u.xhr=r,u},J=n("zLi2"),$=n.n(J),ee=n("RKTd"),te=n.n(ee),ne=n("KYsz"),re=n.n(ne),ue=function(e){var t;try{var n,r;t=re()(n=te()(r=e.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(n,(function(e,t){var n=t.split(": "),r=$()(n,2),u=r[0],o=r[1];return e[u]=o,e}),{})}catch(t){Object(T.debugLog)("uploady.request: failed to read response headers",e)}return t},oe=Z,ae=n("VPmE"),ie=n("ZbhI"),ce=n.n(ie),le=n("UtpJ"),de=n.n(le),se=n("kT1S"),fe=n.n(se),pe="rpldy-sender",ve=n("06Pm"),ge=n.n(ve),he=n("X5/F"),be=n.n(he),me=n("K82H"),Se=n.n(me),Ee=n("P0a4"),ye=n.n(Ee),Oe=function(e){be()(n,e);var t=Se()(n);function n(e){var r;return ge()(this,n),(r=t.call(this,"".concat(e," didn't receive upload URL"))).name="MissingUrlError",r}return n}(ye()(Error)),Re=n("i5y0"),Ie=n.n(Re),Le=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];var o,a;e.set?e.set.apply(e,_()(o=[t]).call(o,r)):(e.delete&&e.delete(t),e.append.apply(e,_()(a=[t]).call(a,r)))},Ce=function(e,t){var n,r=new FormData;(function(e,t,n){var r=1===t.length;V()(t).call(t,(function(t,u){var o,a=r?n.paramName:Object(ae.e)(n.formatGroupParamName)?n.formatGroupParamName(u,n.paramName):_()(o="".concat(n.paramName,"[")).call(o,u,"]");t.file?Le(e,a,t.file,t.file.name):t.url&&Le(e,a,t.url)}))}(r,e,t),t.params)&&V()(n=Ie()(t.params)).call(n,(function(e){var t=$()(e,2),n=t[0],u=t[1];return Le(r,n,u)}));return r},Te=[200,201,202,203,204],De=function(e,t,n,r,u){var o,a=(null==u?void 0:u.getRequestData)?u.getRequestData(e,n):function(e,t){var n;if(t.sendWithFormData)T.debugLog("uploady.sender: sending ".concat(e.length," item(s) as form data")),n=Ce(e,t);else{if(e.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(e.length));var r=e[0];T.debugLog("uploady.sender: sending item ".concat(r.id," as request body")),n=r.file||r.url}return n}(e,n),i=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=arguments.length>2?arguments[2]:void 0;c=Object(ae.i)(fe()(fe()({},Object(ae.j)(n,["method","headers","withCredentials"])),{},{preSend:function(t){t.upload.onprogress=function(t){t.lengthComputable&&r&&r(t,de()(e).call(e))}}}),c);var l=oe(u,i,c);return o=l.xhr,l},c=(null==u?void 0:u.preRequestHandler)?u.preRequestHandler(i,e,t,n,r,u):i();return{url:t,count:e.length,pXhr:c,getXhr:function(){return o},aborted:!1}},we=function(e,t,n){var r=e,u=t&&t["content-type"];if(n.forceJsonResponse||u&&~ce()(u).call(u,"json"))try{r=JSON.parse(e)}catch(e){}return r},Ae=function(e,t){return e.pXhr.then((function(e){var n,r;T.debugLog("uploady.sender: received upload response ",e),n=~ce()(Te).call(Te,e.status)?C.c.FINISHED:C.c.ERROR,r=e.status;var u=ue(e);return{status:r,state:n,response:{data:we(e.response,u,t),headers:u}}})).catch((function(t){var n,r;return e.aborted?(n=C.c.ABORTED,r="aborted"):(T.debugLog("uploady.sender: upload failed: ",t),n=C.c.ERROR,r=t),{error:!0,state:n,response:r,status:0}}))},_e=function(e){return function(t,n,r,u){if(!n)throw new Oe(pe);T.debugLog("uploady.sender: sending file: ",{items:t,url:n,options:r});var o=De(t,n,r,u,e);return{request:Ae(o,r),abort:function(){return function(e){var t,n=!1,r=e.aborted,u=(0,e.getXhr)();!r&&u&&u.readyState&&4!==u.readyState&&(T.debugLog(_()(t="uploady.sender: cancelling request with ".concat(e.count," items to: ")).call(t,e.url)),u.abort(),e.aborted=!0,n=!0);return n}(o)},senderType:pe}}},Ue=_e(),ke=Ue,Pe=Object(ae.b)({chunked:!0,chunkSize:5242880,retries:0,parallel:1}),Ne=null,je=(Ne=null,Object(ae.d)()&&"Blob"in window&&(Ne=de()(Blob.prototype)||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),!!Ne),Be=function(e,t,n){var r,u=null===(r=Ne)||void 0===r?void 0:r.call(e,t,n,e.type);return u&&(u.name=e.name,u.lastModified=e.lastModified),u},He=n("sLxP"),xe=n.n(He),Fe=n("FLGM"),Me=n.n(Fe),qe=function(e){be()(n,e);var t=Se()(n);function n(e){var r;return ge()(this,n),(r=t.call(this,e)).name="ChunkedSendError",r}return n}(ye()(Error)),ze=n("M5Mt"),Ge=n.n(ze),Ke=q()("__rpldy-sstt-proxy__"),Xe=q()("__rpldy-sstt-state__"),We=n("6UaR"),Qe=n.n(We),Ve=n("OWCx"),Ye=n.n(Ve),Ze=function(e){var t;return!Object(ae.g)()&&!!e&&!!~ce()(t=Ye()(e)).call(t,Ke)},Je=function(e){return Qe()(e)||Object(ae.f)(e)&&!function(e){return e instanceof File||e.name&&e.size&&e.uri}(e)},$e=Object(ae.c)({withSymbols:!0,predicate:function(e){return e!==Ke&&e!==Xe}}),et=function(e){return!!Object(ae.g)()||e[Xe].isUpdateable},tt=function(e,t){Object(ae.g)()||(e[Xe].isUpdateable=t)},nt=function(e,t){var n,r;Je(e)&&(Ze(e)||(e[Ke]=!0,n=new Proxy(e,t)),V()(r=W()(e)).call(r,(function(n){e[n]=nt(e[n],t)})));return n||e},rt=function(e){return Ze(e)?Object(ae.a)(e,$e):e},ut=function(e){var t={set:function(e,r,u){return et(n)&&(e[r]=nt(u,t)),!0},get:function(e,t){return t===Ke?rt(e):e[t]},defineProperty:function(){throw new Error("Simple State doesnt support defining property")},setPrototypeOf:function(){throw new Error("Simple State doesnt support setting prototype")},deleteProperty:function(e,t){return et(n)&&delete e[t],!0}};Object(ae.g)()||Ze(e)||H()(e,Xe,{value:{isUpdateable:!1},configurable:!0});var n=Object(ae.g)()?e:nt(e,t);return{state:n,update:function(e){if(!Object(ae.g)()&&et(n))throw new Error("Can't call update on State already being updated!");try{tt(n,!0),e(n)}finally{tt(n,!1)}return n},unwrap:function(e){return e?rt(e):Ze(n)?rt(n):n}}},ot=Object(ae.b)({CHUNK_START:"CHUNK_START",CHUNK_FINISH:"CHUNK_FINISH"}),at="rpldy-chunked-sender",it=n("mnMc"),ct=n.n(it),lt=function(e,t,n){var r,u;return t&&_()(r=_()(u="bytes ".concat(e.start,"-")).call(u,e.start+t.size-1,"/")).call(r,n.file.size)},dt=Object(ae.c)({undefinedOverwrites:!0}),st=function(e,t,n,r,u){var o,a=fe()(fe()({},rt(t.sendOptions)),{},{headers:fe()(fe()({},t.sendOptions.headers),{},{"Content-Range":lt(e,e.data,n)})}),i=K(e.data,e.id),c=function(t){r(t,[e])},l=ce()(o=t.chunks).call(o,e);return j(u,ot.CHUNK_START,{item:rt(n),chunk:Object(ae.j)(e,["id","start","end","index","attempt"]),chunkItem:i,sendOptions:a,url:t.url,chunkIndex:l,chunkCount:t.chunks.length,onProgress:r}).then((function(e){var r,u=!1===e;u&&T.debugLog(_()(r="chunkedSender.sendChunk: received false from CHUNK_START handler - skipping chunk ".concat(l,", item ")).call(r,n.id));return u?{request:k.a.resolve({state:C.c.FINISHED,response:"skipping chunk as instructed by CHUNK_START handler",status:200}),abort:function(){return!0},senderType:"chunk-skipped-sender"}:ke([i],(null==e?void 0:e.url)||t.url,dt({},a,e&&e.sendOptions),c)}))},ft=function(e,t){e(t instanceof qe?{state:C.c.ERROR,response:"At least one chunk failed"}:{state:C.c.ERROR,response:t.message})},pt=function(e,t,n,r,u,o){return new k.a((function(a,i){try{var c=function(e,t,n,r,u){var o,a,i;if(e.data||(e.data=Be(n.file,e.start,e.end)),!e.data)throw new qe("chunk failure - failed to slice");T.debugLog(_()(o=_()(a=_()(i="chunkedSender.sendChunk: about to send chunk ".concat(e.id," [")).call(i,e.start,"-")).call(a,e.end,"] to: ")).call(o,t.url||""));var c=st(e,t,n,r,u);return{request:c.then((function(e){return e.request})),abort:function(){return c.then((function(e){return(0,e.abort)()})),!0},senderType:"chunk-passthrough-sender"}}(u,e,t,n,o);(function(e,t,n,r,u){return e.requests[n]={id:n,abort:r.abort},r.request.then((function(r){var o;T.debugLog("chunkedSender: request finished for chunk: ".concat(n," - "),r),delete e.requests[n];var a=w()(o=e.chunks).call(o,(function(e){return e.id===n}));if(~a){if(r.state===C.c.FINISHED){var i,c=Ge()(i=e.chunks).call(i,a,1);u(ot.CHUNK_FINISH,{chunk:Object(ae.j)(c[0],["id","start","end","index","attempt"]),item:rt(t),uploadData:r})}else r.state!==C.c.ABORTED&&(e.chunks[a].attempt+=1);e.responses.push(r.response)}}))})(e,t,u.id,c,o).then((function(){a(),function(e,t,n){var r=!e.chunks.length;return r&&!e.error&&(e.finished=!0,T.debugLog("chunkedSender: chunked upload finished for item: ".concat(t.id),e.responses),n({state:C.c.FINISHED,response:{results:e.responses}})),r||e.error}(e,t,r)||vt(e,t,n,r,o)}))}catch(e){i(e)}}))},vt=function(e,t,n,r,u){if(!e.finished&&!e.aborted){var o=W()(e.requests).length;if(!o||e.parallel&&e.parallel>o){var a;try{a=function(e){for(var t=[],n=W()(e.requests),r=e.parallel||1,u=0;u<e.chunks.length&&n.length<r&&t.length<r;u++){var o=e.chunks[u];if(!ct()(n).call(n,o.id)){if(o.attempt&&!(o.attempt<e.retries))throw new qe("chunk failure");t.push(o)}}return t}(e)}catch(e){ft(r,e)}a&&V()(a).call(a,(function(o){pt(e,t,n,r,o,u).catch((function(t){e.error=!0,ft(r,t)}))}))}}},gt=vt,ht=function(e,t,n,r){var u=L()((function(r,u){var o,a=u[0].id;e.uploaded[a]=r.loaded;var i=re()(o=W()(e.uploaded)).call(o,(function(t,n){return t+e.uploaded[n]}),0);n({loaded:i,total:t.file.size},[t])}),100,!0);return{sendPromise:new k.a((function(n){gt(e,t,u,n,r)})),abort:function(){return function(e,t){var n;(T.debugLog("chunkedSender: aborting chunked upload for item: ".concat(t.id)),e.finished||e.aborted)||(V()(n=W()(e.requests)).call(n,(function(t){T.debugLog("chunkedSender: aborting chunk: ".concat(t)),e.requests[t].abort()})),e.aborted=!0);return e.aborted}(e,t)}}},bt=function(e,t,n,r,u,o){var a,i=function(e,t){var n,r,u,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.chunkSize,i=o?e.file.size-o:e.file.size;if(i<=0)throw new qe(_()(u="start byte ".concat(o," is invalid. File size: ")).call(u,e.file.size));var c=i<=a?1:Math.ceil(i/a);return Me()(n=xe()(r=new Array(c)).call(r,null)).call(n,(function(t,n){var r,u=a*n+(o||0);return{id:_()(r="".concat(e.id,"_chunk-")).call(r,n),start:u,end:Math.min(u+a,e.file.size),data:null,attempt:0,uploaded:0,index:n}}))}(e,t,r.startByte);T.debugLog(_()(a="chunkedSender: created ".concat(i.length," chunks for: ")).call(a,e.file.name));var c=fe()({finished:!1,aborted:!1,error:!1,uploaded:{},requests:{},responses:[],chunks:i,url:n,sendOptions:r},t),l=ht(c,e,u,o);return{request:l.sendPromise,abort:l.abort,senderType:at}},mt=function(e,t){var n=function(e){return Object(ae.i)({},Pe,e)}(e);return{send:function(e,r,u,o){var a;return!n.chunked||e.length>1||e[0].url||!e[0].file.size?(a=ke(e,r,u,o),T.debugLog("chunkedSender: sending items as normal, un-chunked requests")):(T.debugLog("chunkedSender: sending file as a chunked request"),a=bt(e[0],n,r,u,o,t)),a}}},St=function(e){return function(t,n){var r=mt(e,n);return t.update({send:r.send}),t}},Et=St,yt=n("04Ix"),Ot=n.n(yt),Rt=n("RSWj"),It=n.n(Rt),Lt=n("HnXd"),Ct=n.n(Lt),Tt=n("Vi3r"),Dt=n.n(Tt),wt=n("5PDf"),At=n.n(wt),_t=n("eLKs"),Ut=n.n(_t),kt=n("STz3"),Pt=n.n(kt),Nt=n("cdeZ"),jt=n.n(Nt),Bt=n("/FZm"),Ht=n.n(Bt),xt=n("JlUD"),Ft=n.n(xt),Mt=Object(ae.b)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),qt=function(e,t){if(!Object(ae.e)(e))throw new Error("'".concat(t,"' is not a valid function"))},zt=function(e){return void 0===e},Gt=q()("__le__"),Kt=q()("__le__pack__"),Xt=function(e){return e?e[Gt]:null},Wt=function(e){var t=Xt(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},Qt=function(e){return!!Xt(e)},Vt=function(e,t,n){var r,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];qt(n,"cb");var o=Wt(e);if(!o.options.allowRegisterNonExistent&&!~ce()(r=o.events).call(r,t))throw new Error("Cannot register for event ".concat(t.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var a=o.registry[t]||[];return Ht()(a).call(a,(function(e){return e.cb===n}))||(a.push({name:t,cb:n,once:u}),o.registry[t]=a),function(){return rn.call(e,t,n)}},Yt=function(e,t){var n,r,u=Wt(e).registry;return t?u[t]?de()(n=u[t]).call(n):[]:jt()(r=Pt()(u)).call(r)},Zt={on:function(e,t){return Vt(this,e,t)},once:function(e,t){return Vt(this,e,t,!0)},off:rn,getEvents:function(){var e;return de()(e=Wt(this).events).call(e)}},Jt=function(){var e;return re()(e=Ie()(Zt)).call(e,(function(e,t){var n=$()(t,2),r=n[0],u=n[1];return e[r]={value:u},e}),{})},$t={trigger:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];var o,a=Yt(this,e);if(a.length){var i,c,l,d;1===r.length&&!0===(null===(i=r[0])||void 0===i?void 0:i[Kt])&&(d=r[0].resolve()),o=Me()(c=At()(l=Me()(a).call(a,(function(n){return n.once&&nn(t,e,n.cb),d?n.cb.apply(n,Dt()(d)):r.length?1===r.length?n.cb(r[0]):2===r.length?n.cb(r[0],r[1]):3===r.length?n.cb(r[0],r[1],r[2]):n.cb.apply(n,r):n.cb()}))).call(l,(function(e){return!zt(e)}))).call(c,(function(e){return Ft()(e)?e:k.a.resolve(e)}))}return o&&(o.length?o:void 0)},addEvent:function(e){var t=Wt(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var n;if(~ce()(n=t.events).call(n,e))throw new Error("Event '".concat(e,"' already defined"));t.events.push(e)},removeEvent:function(e){var t=Wt(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var n,r,u=ce()(n=t.events).call(n,e);Ge()(r=t.events).call(r,u,1)},hasEvent:function(e){var t,n=Wt(this);return!!~ce()(t=n.events).call(t,e)},hasEventRegistrations:function(e){return!!Yt(this,e).length},assign:function(e){var t=Wt(this);return an(e,t.options,t.events,t.registry,t.stats),en(e)}},en=function(e){var t;return re()(t=W()($t)).call(t,(function(t,n){var r;return t[n]=Ut()(r=$t[n]).call(r,e),t}),fe()({target:e},$t))},tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wt(e).registry;!r[t]||!n&&r[t].length||delete r[t]},nn=function(e,t,n){var r,u=Wt(e).registry;u[t]&&(n?(u[t]=At()(r=u[t]).call(r,(function(e){return e.cb!==n})),tn(e,t)):tn(e,t,!0))};function rn(e,t){nn(this,e,t)}var un,on,an=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Ct()(e,fe()(Ot()({},Gt,{value:It()({registry:r,events:n,options:t,stats:u})}),Jt()))},cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return e=e||{},n=fe()(fe()({},Mt),n),Qt(e)||an(e,n,t),en(e)},ln=function(e){var t={resolve:function(){var t;return _()(t=[]).call(t,e())}};return H()(t,Kt,{value:!0,configurable:!1}),t},dn="rpldy-mock-sender",sn=n("Kwsy"),fn=n.n(sn),pn=Object(ae.b)({delay:500,fileSize:1e6,progressIntervals:[10,25,50,75,99]}),vn=function(e,t,n){return e.then((function(e){return T.debugLog("uploady.mockSender: mock request finished successfully"),{status:t.responseStatus||200,state:C.c.FINISHED,response:fe()(fe()({},e),{},{headers:{"x-request-type":"react-uploady.mockSender"},data:t.response||{sendOptions:n,mock:!0,success:!0}})}})).catch((function(){return T.debugLog("uploady.mockSender: mock request was aborted"),{status:0,state:C.c.ABORTED,response:"abort"}}))},gn=function(e){var t=fe()(fe()({},pn),e);return{send:function(e,n,r,u){T.debugLog("uploady.mockSender: about to make a mock request for items: ",e);var o=function(e,t){var n,r,u=performance.now(),o=[],a=!1,i=!1,c=null,l=null,d=null,s=function(){l&&(V()(l).call(l,(function(e){clearTimeout(e)})),l=null)},f=new k.a((function(t,n){d=n,fn()((function(){i=!0,t({options:e,time:performance.now()-u,progressEvents:o}),s()}),e.delay||0)}));e.progressIntervals&&(l=Me()(r=e.progressIntervals).call(r,(function(n){var r=n/100,u=(e.delay||0)*r;return fn()((function(){if(!a&&!i&&c){var n={total:e.fileSize||0,loaded:(e.fileSize||0)*r};o.push(n),c(n,t)}}),u)})));return{then:Ut()(n=f.then).call(n,f),abort:function(){return a=!0,i=!0,d&&d(),s(),!0},onProgress:function(e){c=e}}}(t,e);return o.onProgress(u),{request:vn(o,t,r),abort:o.abort,senderType:dn}},update:function(e){t=fe()(fe()({},t),e)}}},hn=function(e){return function(t){var n=gn(e);return t.update({send:n.send}),t}},bn=gn,mn=Object(ae.b)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND"}),Sn=Object(ae.b)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),En=[C.a.ADDED,C.a.PROCESSING,C.a.UPLOADING],yn=function(e,t){return e.batches[t].batch},On=function(e,t,n){return e.getState().items[t].batchId===n},Rn=function(e,t){var n=e.getState(),r=n.items[t];return n.batches[r.batchId]},In=function(e,t){return Rn(e,t).batch},Ln=function(e,t){var n=function(e,t){return yn(e.getState(),t)}(e,t);e.updateState((function(e){var t;V()(t=n.items).call(t,(function(t){var n,r=t.id;delete e.items[r];var u,o=ce()(n=e.itemQueue).call(n,r);~o&&Ge()(u=e.itemQueue).call(u,o,1)}))}))},Cn=function(e,t){e.updateState((function(e){delete e.batches[t]}))},Tn=function(e,t){var n=In(e,t);return e.getState().currentBatch!==n.id},Dn=function(e){var t=e.getState(),n=t.currentBatch;n&&t.batches[n]&&function(e){var t=e.getState().itemQueue;return 0===t.length||Tn(e,t[0])}(e)&&(wn(e,n,mn.BATCH_FINISH),Ln(e,n),Cn(e,n))},wn=function(e,t,n){var r,u=e.getState(),o=yn(u,t),a=u.items,i=fe()(fe()({},rt(o)),{},{items:Me()(r=o.items).call(r,(function(e){var t=e.id;return rt(a[t])}))});e.trigger(n,i)},An=function(e,t){var n=In(e,t);return ct()(En).call(En,n.state)},_n=(un={},Ot()(un,C.c.ADDED,mn.ITEM_START),Ot()(un,C.c.FINISHED,mn.ITEM_FINISH),Ot()(un,C.c.ERROR,mn.ITEM_ERROR),Ot()(un,C.c.CANCELLED,mn.ITEM_CANCEL),Ot()(un,C.c.ABORTED,mn.ITEM_ABORT),Ot()(un,C.c.UPLOADING,mn.ITEM_PROGRESS),un),Un=[C.c.FINISHED,C.c.ERROR,C.c.CANCELLED,C.c.ABORTED],kn=function(e){return!!~ce()(Un).call(Un,e.state)},Pn=function(e,t,n){return V()(t).call(t,(function(t){var n,r=e.getState(),u=t.id,o=t.info;if(T.debugLog("uploader.processor.queue: request finished for item - ",{id:u,info:o}),r.items[u]){e.updateState((function(e){var t=e.items[u];t.state=o.state,t.uploadResponse=o.response,kn(t)&&delete e.aborts[u]}));var a=e.getState().items[u];o.state===C.c.FINISHED&&a.completed<100&&e.handleItemProgress(a,100,a.file?a.file.size:0),e.trigger(_n[a.state],a),kn(a)&&e.trigger(mn.ITEM_FINALIZE,a)}var i=ce()(n=r.itemQueue).call(n,u);~i&&e.updateState((function(e){var t,n;Ge()(t=e.itemQueue).call(t,i,1);var r,o=ce()(n=e.activeIds).call(n,u);~o&&Ge()(r=e.activeIds).call(r,o,1)}))})),Dn(e),n(e)},Nn=Object(ae.c)({undefinedOverwrites:!0}),jn=function(e,t){var n=Me()(t).call(t,(function(e){return e.id}));return e.updateState((function(e){var t;e.activeIds=_()(t=e.activeIds).call(t,n)})),function(e,t,n){return j(e.trigger,mn.REQUEST_PRE_SEND,{items:t,options:n}).then((function(e){if(e){if(T.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",e),e.items){if(e.items.length!==t.length||!Object(ae.h)(e.items,t,["id","batchId","recycled"]))throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");t=e.items}e.options&&(n=Nn({},n,e.options))}return{items:t,options:n,cancelled:!1===e}}))}(e,t,e.getState().batches[t[0].batchId].batchOptions).then((function(n){if(!n.cancelled){var r;e.updateState((function(e){var r;V()(r=n.items).call(r,(function(t){e.items[t.id]=t})),e.batches[t[0].batchId].batchOptions=n.options}));var u=e.getState();n.items=Me()(r=n.items).call(r,(function(e){return u.items[e.id]})),n.options=u.batches[t[0].batchId].batchOptions}return n}))},Bn=function(e,t,n){var r,u=t.items,o=t.options,a=e.getState().batches[u[0].batchId].batch;try{r=e.sender.send(u,a,o)}catch(e){T.debugLog("uploader.queue: sender failed with unexpected error",e),r={request:k.a.resolve({status:0,state:C.c.ERROR,response:e.message}),abort:function(){return!1},senderType:"exception-handler"}}return function(e,t,n){e.updateState((function(e){V()(t).call(t,(function(t){e.items[t.id].state=C.c.UPLOADING,e.aborts[t.id]=n.abort}))}))}(e,u,r),r.request.then((function(t){var r=Me()(u).call(u,(function(e){return{id:e.id,info:t}}));Pn(e,r,n)}))},Hn=function(e,t,n){var r=e.getState(),u=Pt()(r.items);return u=At()(u).call(u,(function(e){return!!~ce()(t).call(t,e.id)})),k.a.all(Me()(u).call(u,(function(t){return e.runCancellable(mn.ITEM_START,t)}))).then((function(t){var n;return{allowedItems:At()(n=Me()(t).call(t,(function(t,n){return t?null:function(e,t){return t.getState().items[e]}(u[n].id,e)}))).call(n,Boolean),cancelledResults:t}})).then((function(r){var o=r.allowedItems,a=r.cancelledResults;return(o.length?jn(e,o).then():k.a.resolve()).then((function(r){var o;return r&&(r.cancelled?a=Me()(t).call(t,(function(){return!0})):Bn(e,r,n)),function(e,t,n,r){var u,o=At()(u=Me()(n).call(n,(function(e,n){return e?t[n].id:null}))).call(u,Boolean);if(o.length){var a=Me()(o).call(o,(function(e){return{id:e,info:{status:0,state:C.c.CANCELLED,response:"cancel"}}}));Pn(e,a,r)}return!!o.length}(e,u,a,n)||(o=n(e)),o}))}))},xn=function(e,t){var n,r;return!!~ce()(n=jt()(r=e.getState().activeIds).call(r)).call(n,t)},Fn=function(e){var t,n=e.getState().itemQueue,r=function(e){for(var t=e.getState(),n=t.itemQueue,r=t.items,u=0,o=n[u];o&&(xn(e,o)||!An(e,o)||r[o].state!==C.c.ADDED);)o=n[u+=1];return o?u:-1}(e),u=n[r];if(u){var o=Rn(e,u),a=o.batch.id,i=o.batchOptions.maxGroupSize||0;if(o.batchOptions.grouped&&i>1){t=[];for(var c=!0;t.length<i&&c;)t.push(u),c=(u=n[r+t.length])&&On(e,u,a)}else t=[u]}return t},Mn=function(e){var t=Fn(e),n=k.a.resolve();if(t){var r=e.getCurrentActiveCount(),u=e.getOptions(),o=u.concurrent,a=void 0===o?0:o,i=u.maxConcurrent;if(!r||a&&r<(void 0===i?0:i)){T.debugLog("uploader.processor: Processing next upload - ",{ids:t,state:e.getState(),currentCount:r});var c=!1,l=k.a.resolve(!1);Tn(e,t[0])&&(l=function(e,t){var n=In(e,t);return e.runCancellable(mn.BATCH_START,n).then((function(t){return t||e.updateState((function(e){e.currentBatch=n.id})),!t}))}(e,t[0]).then((function(n){return(c=!n)&&(!function(e,t){var n=In(e,t),r=n.id;T.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:n}),e.updateState((function(e){yn(e,r).state=C.a.CANCELLED})),wn(e,r,mn.BATCH_CANCEL),Ln(e,r),Cn(e,r)}(e,t[0]),Mn(e)),c}))),n=l.then((function(n){n||Hn(e,t,Mn)}))}}return n},qn=Mn,zn=function(e,t,n){var r=!1,u=e.getState(),o=u.items[t];return o&&function(e){return e===C.c.ADDED||e===C.c.UPLOADING}(o.state)&&(T.debugLog("uploader.queue: aborting item in progress - ",o),o.state===C.c.UPLOADING?(e.updateState((function(e){e.items[t].state=C.c.ABORTED})),r=u.aborts[t]()):(Pn(e,[{id:t,info:{status:0,state:C.c.ABORTED,response:"aborted"}}],n),r=!0)),r},Gn=function(e,t,n,r,u){var o=ut({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),a=o.state,i=o.update,c=function(){return a},l=function(e){i(e)},d=function(e){if(a.items[e.id]&&!e.recycled)throw new Error("Uploader queue conflict - item ".concat(e.id," already exists"));e.recycled&&function(e,t){var n=t.previousBatch;if(t.recycled&&n&&e.getState().batches[n]){var r=In(e,t.id).id;r===n&&e.updateState((function(e){var n,u,o=yn(e,r),a=w()(n=o.items).call(n,(function(e){return e.id===t.id}));~a&&Ge()(u=o.items).call(u,a,1)}))}}(f,e),l((function(t){t.items[e.id]=e,t.itemQueue.push(e.id)}))},s=function(e,n,r){a.items[e.id]&&(l((function(t){var u=t.items[e.id];u.loaded=r,u.completed=n})),t(mn.ITEM_PROGRESS,c().items[e.id]))};r.on(Sn.ITEM_PROGRESS,s),r.on(Sn.BATCH_PROGRESS,(function(e){var n,r=null===(n=a.batches[e.id])||void 0===n?void 0:n.batch.items;if(r){var u=re()(r).call(r,(function(e,t){return e[0]+=t.completed,e[1]+=t.loaded,e}),[0,0]),o=$()(u,2),i=o[0],c=o[1];l((function(t){var n=t.batches[e.id].batch;n.completed=i/r.length,n.loaded=c})),t(mn.BATCH_PROGRESS,a.batches[e.id].batch)}}));var f={getOptions:function(){return e},getCurrentActiveCount:function(){return a.activeIds.length},getState:c,updateState:l,trigger:t,runCancellable:function(e){var t;if(!Object(ae.e)(n))throw new Error("cancellable is of wrong type");for(var r=arguments.length,u=new Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];return n.apply(void 0,_()(t=[e]).call(t,u))},sender:r,handleItemProgress:s};return Object(ae.d)()&&T.isDebugOn()&&(window["__rpldy_".concat(u,"_queue_state")]=f),{updateState:l,getState:f.getState,runCancellable:f.runCancellable,uploadBatch:function(e,t){var n;t&&l((function(n){n.batches[e.id].batchOptions=t})),V()(n=e.items).call(n,d),qn(f)},addBatch:function(e,t){return l((function(n){n.batches[e.id]={batch:e,batchOptions:t}})),yn(a,e.id)},abortItem:function(e){return function(e,t,n){return zn(e,t,n)}(f,e,qn)},abortBatch:function(e){!function(e,t,n){var r,u=e.getState().batches[t],o=null==u?void 0:u.batch;o&&o.state!==C.a.CANCELLED&&o.state!==C.a.FINISHED&&(V()(r=o.items).call(r,(function(t){return zn(e,t.id,n)})),e.updateState((function(e){yn(e,t).state=C.a.ABORTED})),wn(e,t,mn.BATCH_ABORT))}(f,e,qn)},abortAll:function(){var e,t,n,r;t=qn,r=(e=f).getState().items,V()(n=W()(r)).call(n,(function(n){return zn(e,n,t)}))}}},Kn=function(){return!0},Xn=Object(ae.b)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:Kn,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),Wn=function(e,t,n,r){!function(e,t,n,r){V()(e).call(e,(function(e){var u,o;T.debugLog(_()(u=_()(o="uploady.uploader.processor: file: ".concat(e.id," progress event: loaded(")).call(o,n,") - completed(")).call(u,t,")")),r(Sn.ITEM_PROGRESS,e,t,n)}))}(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,r),r(Sn.BATCH_PROGRESS,t)},Qn=function(){var e=cn({send:function(e,n,r){var u=r.destination,o=null==u?void 0:u.url,a=L()((function(r){return Wn(e,n,r,t)}),50,!0);return(Object(ae.e)(r.send)?r.send:ke)(e,o,{method:(null==u?void 0:u.method)||r.method||Xn.method,paramName:(null==u?void 0:u.filesParamName)||r.inputFieldName||"file",params:fe()(fe()({},r.params),null==u?void 0:u.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==u?void 0:u.headers,sendWithFormData:r.sendWithFormData},a)}},Pt()(Sn)),t=e.trigger;return e.target},Vn=Object(ae.d)()&&"FileList"in window,Yn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;if(!Object(ae.g)())if(t<3&&Ze(e))n=rt(e);else if(t<3&&Je(e)){var r,u;n=Qe()(e)?Me()(r=W()(e)).call(r,(function(t){return Yn(e[t])})):re()(u=W()(e)).call(u,(function(n,r){return n[r]=Yn(e[r],t+1),n}),{})}return n},Zn=0,Jn=function(e,t,n){var r;return Me()(r=At()(Array.prototype).call(t,n||Kn)).call(r,(function(t){return K(t,e)}))},$n=function(e,t,n){var r="batch-".concat(Zn+=1),u=function(e){return Vn&&e instanceof FileList||"[object FileList]"===e.toString()}(e);return e=Qe()(e)||u?e:[e],{id:r,uploaderId:t,items:Jn(r,e,n.fileFilter),state:C.a.ADDED,completed:0,loaded:0}},er=Pt()(mn),tr=0,nr=function(e){var t="uploader-".concat(tr+=1),n=!1,r=[],u={};T.debugLog("uploady.uploader: creating new instance (".concat(t,")"),{options:e,counter:tr});var o=function(e){return fe()(fe()(fe()({},Xn),e),{},{destination:e&&e.destination?(t=e.destination,fe()({filesParamName:"file",params:{}},t)):null});var t}(e),a=function(){Ge()(r).call(r,0)},i=cn({id:t,update:function(e){return o=Object(ae.i)({},o,e),l},add:function(e,t){var n,u=Object(ae.i)({},o,t),i=p.addNewBatch(e,l.id,u);return i.items.length?n=p.runCancellable(mn.BATCH_ADD,i,u).then((function(e){var t;e?(i.state=C.a.CANCELLED,d(mn.BATCH_CANCEL,i)):(T.debugLog(_()(t="uploady.uploader [".concat(l.id,"]: new items added - auto upload =\n                        ")).call(t,String(u.autoUpload)),i.items),u.autoUpload?p.process(i):(u.clearPendingOnAdd&&a(),r.push({batch:i,uploadOptions:u})))})):T.debugLog("uploady.uploader: no items to add. batch ".concat(i.id," is empty. check fileFilter if this isn't intended")),n||k.a.resolve()},upload:function(e){var t;V()(t=Ge()(r).call(r,0)).call(t,(function(t){var n=t.batch,r=t.uploadOptions;return p.process(n,Object(ae.i)({},r,e))}))},abort:function(e){p.abort(e)},abortBatch:function(e){p.abortBatch(e)},getOptions:function(){return Object(ae.a)(o)},getPending:function(){return de()(r).call(r)},clearPending:a,registerExtension:function(e,t){R()(n,"Uploady - uploader extensions can only be registered by enhancers"),R()(!u[e],"Uploady - uploader extension by this name [%s] already exists",e),T.debugLog("uploady.uploader: registering extension: ".concat(e.toString()),t),u[e]=t},getExtension:function(e){return u[e]}},er,{canAddEvents:!1,canRemoveEvents:!1}),c=i.trigger,l=i.target,d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var u=ln((function(){return Me()(n).call(n,Yn)}));return c(e,u)},s=P(d);if(o.enhancer){n=!0;var f=o.enhancer(l,d);n=!1,l=f||l}var p=function(e,t,n,r){var u=Qn(),o=Gn(n,e,t,u,r);return{process:function(e,t){o.uploadBatch(e,t)},abortBatch:function(e){o.abortBatch(e)},abort:function(e){e?o.abortItem(e):o.abortAll()},addNewBatch:function(e,t,n){var r=$n(e,t,n);return o.addBatch(r,n)},runCancellable:o.runCancellable}}(d,s,o,l.id);return Object(ae.b)(l)},rr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return re()(t).call(t,(function(e,t){var n;return t.apply(void 0,_()(n=[e]).call(n,r))||e}),e)}},ur=nr,or=q()("__upldy-retry__"),ar="RETRY_EVENT",ir=function(e,t,n,r,u){var o,a=t.getState().failed;r=r||W()(a);var i,c=At()(o=Me()(r).call(r,(function(e){return a[e]}))).call(o,Boolean);c.length&&(u=fe()(fe()({},u||null),{},{autoUpload:void 0===(null===(i=u)||void 0===i?void 0:i.autoUpload)||u.autoUpload}),n(ar,{items:c,options:u}),V()(r).call(r,(function(e){return function(e,t){e.updateState((function(e){var n,r,u=e.failed[t].batchId;delete e.failed[t];var o=ce()(n=e.batchIdsMap[u]).call(n,t);Ge()(r=e.batchIdsMap[u]).call(r,o,1),e.batchIdsMap[u].length||delete e.batchIdsMap[u]}))}(t,e)})),e.add(c,u));return!!c.length},cr=function(e,t,n,r,u){var o;return r?o=function(e,t,n,r,u){return T.debugLog("uploady.retry: about to retry item: ".concat(r)),ir(e,t,n,[r],u)}(e,t,n,r,u):(T.debugLog("uploady.retry: about to retry all failed item"),o=ir(e,t,n,null,u)),o},lr=function(e,t){var n,r,u,o=(n=ut({batchIdsMap:{},failed:{}}),r=n.state,u=n.update,{updateState:function(e){u(e)},getState:function(){return r}});return function(e,t){var n=function(e){t.updateState((function(t){t.failed[e.id]=e,(t.batchIdsMap[e.batchId]=t.batchIdsMap[e.batchId]||[]).push(e.id)}))};e.on(mn.ITEM_ERROR,n),e.on(mn.ITEM_ABORT,n)}(e,o),e.registerExtension(or,{retry:function(n,r){return cr(e,o,t,n,r)},retryBatch:function(n,r){return function(e,t,n,r,u){var o;T.debugLog("uploady.retry: about to retry batch: ".concat(r));var a=null===(o=t.getState().batchIdsMap[r])||void 0===o?void 0:de()(o).call(o);return!!a&&ir(e,t,n,a,u)}(e,o,t,n,r)}}),e},dr=n("MAKL"),sr=n.n(dr),fr=function(e){var t=!1;!function(){try{if(Object(ae.d)()&&e in window){window[e].setItem("__lsTest","__test-".concat(sr()())),window[e].removeItem("__lsTest"),t=!0}}catch(e){}}();var n=["key","getItem","setItem","removeItem","clear"],r=re()(n).call(n,(function(n,r){return n[r]=function(){var n;return t?(n=window[e])[r].apply(n,arguments):null},n}),{});return r.isSupported=t,H()(r,"length",{get:function(){return t?window[e].length:0}}),r},pr=fr("localStorage"),vr=fr("sessionStorage"),gr=Object(ae.b)(fe()(fe()({},Pe),{},{featureDetection:!1,featureDetectionUrl:null,version:"1.0.0",resume:!0,overrideMethod:!1,deferLength:!1,sendDataOnCreate:!1,storagePrefix:"__rpldy-tus__",lockedRetryDelay:2e3,forgetOnSuccess:!1,ignoreModifiedDateInStorage:!1})),hr=n("WxoT"),br=n.n(hr),mr=function(e,t,n){var r,u,o=At()(r=[e.file.name,e.file.type,e.file.size,t.ignoreModifiedDateInStorage?null:e.file.lastModified,n]).call(r,Boolean).join("/");return _()(u="".concat(t.storagePrefix||gr.storagePrefix)).call(u,o)},Sr=function(e,t,n,r){n.resume&&pr.setItem(mr(e,n,r),br()({time:sr()(),uploadUrl:t}))},Er=function(e,t,n){var r,u=mr(e,t,n);if(t.resume)try{var o=pr.getItem(u);if(o)r=JSON.parse(o).uploadUrl}catch(e){T.debugLog("tusSender.resumableStore: failed to retrieve persisted data for key: ".concat(u),e)}return r},yr=function(e,t,n){var r=mr(e,t,n);pr.removeItem(r)},Or=function(e){for(var t=e.storagePrefix||gr.storagePrefix,n=0;n<pr.length;n++){var r=pr.key(n);r&&!ce()(r).call(r,t)&&pr.removeItem(r)}},Rr=n("lHQ6"),Ir=n.n(Rr),Lr=q()("__upldy-tus__"),Cr="rpldy-tus-sender",Tr=[200,201,204],Dr="creation-with-upload",wr="concatenation",Ar="creation-defer-length",_r=function(e){var t=e.params&&W()(e.params);return(null==t?void 0:t.length)?Me()(t).call(t,(function(t){var n;return _()(n="".concat(t," ")).call(n,btoa(e.params[t]))})).join(","):void 0},Ur=function(e,t){return e.then((function(e){return e.state===C.c.FINISHED&&(e.response.location=t),e}))},kr=function(e,t,n,r,u){var o,a=n.getState().options,i=fe()({"tus-resumable":a.version,"Upload-Defer-Length":a.deferLength?1:void 0,"Upload-Length":a.deferLength?void 0:e.file.size,"Upload-Metadata":u?void 0:_r(r),"Content-Type":a.sendDataOnCreate?"application/offset+octet-stream":void 0},r.headers),c=null;if(T.debugLog(_()(o="tusSender.create - creating upload for ".concat(e.id," at: ")).call(o,t)),a.sendDataOnCreate){T.debugLog("tusSender.create - adding first chunk to create request");var l=+a.chunkSize;c=l<e.file.size?Be(e.file,0,l):e.file}var d=oe(t,c,{method:"POST",headers:i}),s=!1;return{request:d.then((function(r){var u=null;return r&&~ce()(Tr).call(Tr,r.status)?u=function(e,t,n,r,u){var o,a,i,c=n.getState().options,l=(a=t,i=r.getResponseHeader("Location"),/^(http:|https:)?\/\//.test(i)?i:[a.replace(/\/$/,""),i.replace(/^\//,"")].join("/")),d=0,s=!1;if(T.debugLog(_()(o="tusSender.create: successfully created upload for item: ".concat(e.id," - upload url = ")).call(o,l)),c.sendDataOnCreate){var f=Ir()(r.getResponseHeader("Upload-Offset"));d=isNaN(f)?d:f,s=+c.parallel>1&&d===(null==u?void 0:u.size)}return n.updateState((function(t){t.items[e.id].uploadUrl=l,t.items[e.id].offset=d})),{offset:d,uploadUrl:l,isNew:!0,isDone:s}}(e,t,n,r,c):T.debugLog("tusSender.create: create upload failed for item: ".concat(e.id),r),u})).catch((function(e){return T.debugLog("tusSender.create: create upload failed",e),null})).finally((function(){s=!0})),abort:function(){return s||(T.debugLog("tusSender.create: aborting create request for item: ".concat(e.id)),d.xhr.abort()),!s}}},Pr=function(e,t,n){return yr(e,t,n),{isNew:!1,canResume:!1}},Nr=function(e,t,n,r,u){var o,a,i=n.getState().options;T.debugLog(_()(o=_()(a="tusSender.resume - resuming upload for ".concat(e.id)).call(a,r?"-".concat(r):""," at: ")).call(o,t));var c=oe(t,null,{method:"HEAD",headers:{"tus-resumable":i.version}}),l=!1;return{request:c.then((function(o){var a;if(o&&~ce()(Tr).call(Tr,o.status))a=function(e,t,n,r){var u,o=!1,a=!1;T.debugLog(_()(u="tusSender.resume - successfully initiated resume for item: ".concat(e.id," - upload url = ")).call(u,t));var i=Ir()(r.getResponseHeader("Upload-Offset"));if(!isNaN(i)){var c=Ir()(r.getResponseHeader("Upload-Length"));isNaN(c)&&!n.getState().options.deferLength||(o=!(a=i===c),n.updateState((function(n){n.items[e.id].uploadUrl=t,n.items[e.id].offset=i})))}return{offset:i,uploadUrl:t,isNew:!1,isDone:a,canResume:o}}(e,t,n,o);else if(423===(null==o?void 0:o.status)&&0===u){var c;T.debugLog(_()(c="tusSender.resume: upload is locked for item: ".concat(e.id,". Will retry in ")).call(c,+i.lockedRetryDelay),o),a=function(e,t,n,r,u){return new k.a((function(o){fn()((function(){Nr(e,t,n,r,u).request.then(o)}),n.getState().options.lockedRetryDelay)}))}(e,t,n,r,1)}else{var l;T.debugLog(_()(l="tusSender.resume: failed for item: ".concat(e.id)).call(l,r?"-".concat(r):""),o),a=Pr(e,i,r)}return a})).catch((function(t){return T.debugLog("tusSender.resume: resume upload failed unexpectedly",t),Pr(e,i,r)})).finally((function(){l=!0})),abort:function(){return l||(T.debugLog("tusSender.resume: aborting resume request for item: ".concat(e.id)),c.xhr.abort()),!l}}},jr=function(e,t,n,r){return Nr(e,t,n,r,0)},Br=function(e,t,n,r,u){return u.then((function(u){var o=u;if(u.state===C.c.FINISHED){var a=n.getState(),i=a.options,c=a.items,l=c[e.id];if(l){var d,s,f=l.parallelChunks,p=Me()(d=At()(f).call(f,(function(e){var t;return null===(t=c[e])||void 0===t?void 0:t.uploadUrl}))).call(d,(function(e){return c[e].uploadUrl}));if(p.length!==f.length)throw new Error(_()(s="tusSender: something went wrong. found ".concat(p.length," upload urls for ")).call(s,f.length," chunks"));var v={"tus-resumable":i.version,"Upload-Concat":"final;".concat(p.join(" ")),"Upload-Metadata":_r(r)};T.debugLog("tusSender.finalizeParallel: sending finalizing request",{url:t,headers:v});var g=oe(t,null,{method:"POST",headers:v});n.updateState((function(t){t.items[e.id].abort=function(){return g.xhr.abort(),!0}})),o=function(e,t){return e.catch((function(e){return T.debugLog("tusSender.finalizeParallel: finalize request failed unexpectedly!",e),e})).then((function(e){var n,r=(null==e?void 0:e.status)||0,u=!!~ce()(Tr).call(Tr,r),o=u&&(null==e?void 0:e.getResponseHeader)&&e.getResponseHeader("Location");return o?(T.debugLog("tusSender.finalizeParallel: successfully finalized parallel upload",o),n=Ur(k.a.resolve(t),o)):(T.debugLog("tusSender.finalizeParallel: parallel upload finalize failed!",r),n={status:r,state:C.c.ERROR,response:{message:(null==e?void 0:e.response)||(u&&!o?"No valid location header for finalize request":"")}}),n}))}(g,u)}}return o}))},Hr=function(e,t,n,r,u,o,a,i,c){return a.then((function(a){var l,d=!1;if(a?a.isDone?(T.debugLog("tusSender.handler: resume found server has completed file for item: ".concat(e[0].id),e[0]),l=Ur(k.a.resolve({status:200,state:C.c.FINISHED,response:{message:"TUS server has file"}}),a.uploadUrl)):a.isNew||a.canResume?l=c?function(e,t,n,r){var u=e[0];return n.uploadUrl&&Sr(u,n.uploadUrl,t.getState().options,r),T.debugLog("tusSender.handler: created upload for parallelized chunk: ".concat(u.id)),k.a.resolve({status:200,state:C.c.UPLOADING,response:"TUS server created upload for parallelized part"})}(e,u,a,c):function(e,t,n,r,u,o,a){var i=u.getState().options,c=e[0];T.debugLog("tusSender.handler: init request finished. sending item ".concat(c.id," as chunked"),a),a.isNew&&a.uploadUrl&&Sr(c,a.uploadUrl,i),(a.canResume||i.sendDataOnCreate&&a.offset)&&(n=fe()(fe()({},n),{},{startByte:a.offset}));var l=o.send(e,t,n,r);return u.updateState((function(e){e.items[c.id].abort=l.abort})),+i.parallel>1?Br(c,t,u,n,l.request):Ur(l.request,a.uploadUrl)}(e,t,n,r,u,o,a):d=!0:d=i,d){T.debugLog("tusSender.handler: resume init failed. Will try creating a new upload for item: ".concat(e[0].id));var s=kr(e[0],t,u,n).request;l=Hr(e,t,n,r,u,o,s)}return l||k.a.resolve({status:0,state:C.c.ERROR,response:"TUS initialize failed"})}))},xr=Hr,Fr=function(e,t){t.updateState((function(t){t.items[e.id]={id:e.id,uploadUrl:null,size:e.file.size,offset:0,parallelChunks:[]}}))},Mr=function(e,t,n,r,u,o){var a,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=u.getState(),l=c.options,d=+l.parallel>1&&!i,s=e[0],f=!d&&Er(s,l,i);Fr(s,u),a=d?{request:k.a.resolve({isNew:!0}),abort:function(){return!0}}:f?jr(s,f,u,i):kr(s,t,u,n,i);var p=xr(e,t,n,r,u,o,a.request,!!f,i),v=function(){return T.debugLog("tusSender.handler: abort called for item: ".concat(s.id)),a.abort(),a.request.then((function(e){if(e){T.debugLog("tusSender.handler: aborting chunked upload for item:  ".concat(s.id));var t=u.getState().items[s.id].abort;t&&t()}})),!0};return{request:p,abort:v}},qr=function(e,t){var n;return _()(n="_prlChunk_".concat(+e.chunkSize,"_")).call(n,t)},zr=function(e,t,n){je&&(e.on(mn.ITEM_FINALIZE,(function(e){var n=t.getState(),r=n.items,u=n.options,o=r[e.id];if(o){var a;T.debugLog(_()(a="tusSender.handleEvents: item ".concat(e.id," finalized (")).call(a,e.state,"). Removing from state"));var i=o.parallelChunks;t.updateState((function(t){i.length&&V()(i).call(i,(function(e){delete t.items[e]})),delete t.items[e.id]})),u.forgetOnSuccess&&(T.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing item url from storage: ".concat(e.id)),yr(e,u))}})),e.on(ot.CHUNK_START,(function(e){var r=+t.getState().options.parallel>1;return(r?function(e,t,n){var r=n.item,u=n.chunkItem,o=n.url,a=n.sendOptions,i=n.onProgress,c=n.chunk,l=e.getState().options;return e.updateState((function(e){e.items[r.id].parallelChunks.push(u.id)})),Mr([u],o,fe()(fe()({},a),{},{params:null}),i,e,t,qr(l,c.index)).request.then((function(e){return e.state!==C.c.FINISHED}))}(t,n,e):k.a.resolve(!0)).then((function(n){return n&&function(e,t,n){var r=t.item,u=t.chunk,o=t.chunkItem,a=t.chunkCount,i=e.getState().options,c=e.getState().items[n?o.id:r.id],l=n?0:c.offset||u.start,d={"tus-resumable":i.version,"Upload-Offset":l,"Content-Type":"application/offset+octet-stream","Content-Range":void 0,"X-HTTP-Method-Override":i.overrideMethod?"PATCH":void 0,"Upload-Length":i.deferLength&&u.index===a-1?r.file.size:void 0,"Upload-Concat":n?"partial":void 0};return T.debugLog("tusSender.handleEvents: chunk start handler. offset = ".concat(l),{headers:d,url:c.uploadUrl}),{sendOptions:{sendWithFormData:!1,method:i.overrideMethod?"POST":"PATCH",headers:d},url:c.uploadUrl}}(t,e,r)}))})),e.on(ot.CHUNK_FINISH,(function(e){var n=e.item,r=e.chunk,u=e.uploadData,o=t.getState(),a=o.items,i=o.options;if(+i.parallel>1){if(i.forgetOnSuccess){var c=qr(i,r.index);T.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing parallel chunk url from storage: ".concat(c)),yr(n,i,c)}}else if(a[n.id]){var l,d,s=u.status,f=u.response;T.debugLog(_()(l=_()(d="tusSender.handleEvents: received upload response (code: ".concat(s,") for : ")).call(d,n.id,", chunk: ")).call(l,r.id),f),~ce()(Tr).call(Tr,s)&&f.headers&&t.updateState((function(e){e.items[n.id].offset=f.headers["upload-offset"]}))}})))},Gr=function(e){var t;return _()(t="".concat("rpldy_tus_fd_")).call(t,e)},Kr=(on={},Ot()(on,wr,(function(e,t){+t.getState().options.parallel>1&&!~ce()(e).call(e,wr)&&(T.debugLog("tusSender.featureDetection: disabling parallel uploads, ".concat(wr," extension not available")),t.updateState((function(e){e.options.parallel=1})))})),Ot()(on,Dr,(function(e,t){t.getState().options.sendDataOnCreate&&!~ce()(e).call(e,Dr)&&(T.debugLog("tusSender.featureDetection: disabling create with data, ".concat(Dr," extension not available")),t.updateState((function(e){e.options.sendDataOnCreate=!1})))})),Ot()(on,Ar,(function(e,t){t.getState().options.deferLength&&!~ce()(e).call(e,Ar)&&(T.debugLog("tusSender.featureDetection: disabling defer length, ".concat(Ar," extension not available")),t.updateState((function(e){e.options.deferLength=!1})))})),on),Xr=function(e,t,n){var r=e.getState().options;if(t){T.debugLog("tusSender.featureDetection: retrieved extensions from server",t);var u=t.split(",");if(u.length&&r.onFeaturesDetected){var o=r.onFeaturesDetected(u);o&&e.updateState((function(e){e.options=Object(ae.i)({},e.options,o)}))}else{var a;V()(a=W()(Kr)).call(a,(function(t){Kr[t](u,e)}))}}n&&n!==e.getState().options.version&&(T.debugLog("tusSender.featureDetection: setting version to server version: ".concat(n)),e.updateState((function(e){e.options.version=n}))),e.updateState((function(e){e.featureDetection={processed:!0,version:n,extensions:t}}))},Wr=function(e,t,n){return e.catch((function(e){T.debugLog("tusSender.featureDetection: failed to retrieve data from server",e)})).then((function(e){if(e&&~ce()(Tr).call(Tr,e.status)){var r=e.getResponseHeader("Tus-Extension"),u=e.getResponseHeader("Tus-Resumable");r&&vr.setItem(Gr(t),br()({extensions:r,versions:u})),Xr(n,r,u)}}))},Qr=function(e,t){var n=t.getState().options,r=oe(e,null,{method:"OPTIONS",headers:{"tus-resumable":n.version}});return{request:Wr(r,e,t),abort:function(){return r.xhr.abort(),!0}}},Vr=function(e,t){var n,r=t.getState(),u=r.options,o=r.featureDetection;e=u.featureDetectionUrl||e,T.debugLog("tusSender.featureDetection: about to request server info",e);var a=vr.getItem(Gr(e));return o.processed||(n=a?function(e,t,n){var r;try{(r=JSON.parse(n)).extensions?(T.debugLog("tusSender.featureDetection: retrieved feature detection data from session storage",r),Xr(t,r.extensions,r.version)):r=null}catch(e){T.debugLog("tusSender.featureDetection: failed to load feature detection data from session storage")}return r||vr.removeItem(Gr(e)),r?null:Qr(e,t)}(e,t,a):Qr(e,t)),n},Yr=function(e,t){return je?function(n,r,u,o){var a;if(!r)throw new Oe(Cr);if(n.length>1||n[0].url)a=e.send(n,r,u,o);else{T.debugLog("tusSender: sending file using TUS protocol");var i=t.getState().options.featureDetection?Vr(r,t):null,c=function(e,t,n,r,u,o,a){var i,c=function(){var a=Mr(e,t,n,r,u,o);return i=a.abort,a.request};return{request:a?a.request.then(c,c):c(),abort:function(){return i?i():(null==a?void 0:a.abort())||!1}}}(n,r,u,o,t,e,i);a={request:c.request,abort:c.abort,senderType:Cr}}return a}:ke},Zr=function(e){return((e=function(e){return Object(ae.i)({},gr,e)}(e)).sendDataOnCreate||e.parallel)&&e.deferLength&&(T.debugLog("tusSender: turning off deferLength - cannot be used when sendDataOnCreate or parallel is enabled"),e.deferLength=!1),e.chunked=!0,e},Jr=function(e,t,n){t=Zr(t);var r=mt(t,n),u=function(e,t){var n=ut({options:t,items:{},featureDetection:{extensions:null,version:null,processed:!1}}),r=n.state,u={getState:function(){return r},updateState:n.update};return Object(ae.d)()&&T.isDebugOn()&&(window["__rpldy_".concat(e.id,"_tus_state")]=u),u}(e,t);return zr(e,u,r),{send:Yr(r,u),getOptions:function(){return u.getState().options}}},$r=function(e){return function(t,n){var r=Jr(t,e,n);return t.update({send:r.send}),t.registerExtension(Lr,{getOptions:r.getOptions}),t}},eu=$r,tu=n("EcSs"),nu=n.n(tu),ru=n("tpxy"),uu=n.n(ru),ou=n("cDcd"),au=n.n(ou),iu=function(e,t){var n,r;t?n=t:T.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");var u=function(){var e;return null===(e=n)||void 0===e?void 0:e.current},o=function(){var e=u();R()(e,"Uploady - Context. File input isn't available"),e.removeEventListener("change",o);var t=r;r=null,a(e.files,t)},a=function(t,n){e.add(t,n)};return{hasUploader:function(){return!!e},setExternalFileInput:function(e){n=e},showFileUpload:function(e){var t=u();R()(t,"Uploady - Context. File input isn't available"),r=e,t.removeEventListener("change",o),t.addEventListener("change",o),t.value="",t.click()},upload:a,processPending:function(t){e.upload(t)},setOptions:function(t){e.update(t)},getOptions:function(){return e.getOptions()},getExtension:function(t){return e.getExtension(t)},abort:function(t){e.abort(t)},abortBatch:function(t){e.abortBatch(t)},on:function(t,n){return e.on(t,n)},once:function(t,n){return e.once(t,n)},off:function(t,n){return e.off(t,n)}}},cu=au.a.createContext(null),lu=function(e){return R()(e&&e.hasUploader(),"Uploady - valid UploadyContext not found. Make sure you render inside <Uploady>"),e},du=function(){return lu(Object(ou.useContext)(cu))},su=function(e,t){var n=du(),r=n.on,u=n.off;Object(ou.useEffect)((function(){return r(e,t),function(){u(e,t)}}),[e,t,r,u])},fu=function(e,t){return function(n,r){var u=Object(ou.useState)(null),o=$()(u,2),a=o[0],i=o[1],c=Object(ou.useCallback)((function(e){if(!r||e.id===r){for(var u,o,a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];if(i(t.apply(void 0,_()(u=[e]).call(u,c))),n)n.apply(void 0,_()(o=[e]).call(o,c))}}),[n,r]);return su(e,c),a}},pu=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){var u=Object(ou.useCallback)((function(e){for(var u,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return!n||t&&r&&e.id!==r?void 0:n.apply(void 0,_()(u=[e]).call(u,a))}),[n,r]);su(e,u)}},vu=function(e,t){Object(ae.g)()||e||console.warn(t)},gu=pu(mn.BATCH_ADD,!1),hu=pu(mn.BATCH_START),bu=pu(mn.BATCH_FINISH),mu=pu(mn.BATCH_CANCEL),Su=pu(mn.BATCH_ABORT),Eu=fu(mn.BATCH_PROGRESS,(function(e){return fe()({},e)})),yu=pu(mn.ITEM_START),Ou=pu(mn.ITEM_FINISH),Ru=pu(mn.ITEM_CANCEL),Iu=pu(mn.ITEM_ERROR),Lu=pu(mn.ITEM_ABORT),Cu=pu(mn.ITEM_FINALIZE),Tu=fu(mn.ITEM_PROGRESS,(function(e){return fe()({},e)})),Du=pu(mn.REQUEST_PRE_SEND,!1),wu=function(e){var t=du();return e&&t.setOptions(e),t.getOptions()},Au=function(){var e=du();return Object(ou.useCallback)((function(t){return e.abort(t)}),[e])},_u=function(){var e=du();return Object(ou.useCallback)((function(t){return e.abortBatch(t)}),[e])},Uu=function(){var e=du();return Object(ou.useCallback)((function(){return e.abort()}),[e])},ku=function(e){var t=e.listeners,n=e.debug,r=e.children,u=e.inputRef,o=uu()(e,["listeners","debug","children","inputRef"]);T.setDebug(!!n),T.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);var a=function(e,t){var n=Object(ou.useMemo)((function(){return T.debugLog("Uploady creating a new uploader instance",e),ur(e)}),[e.enhancer]);return n.update(e),Object(ou.useEffect)((function(){var e;t&&(T.debugLog("Uploady setting event listeners",t),V()(e=Ie()(t)).call(e,(function(e){var t=$()(e,2),r=t[0],u=t[1];n.on(r,u)})));return function(){var e;t&&(T.debugLog("Uploady removing event listeners",t),V()(e=Ie()(t)).call(e,(function(e){var t=$()(e,2),r=t[0],u=t[1];return n.off(r,u)})))}}),[t,n]),n}(o,t),i=Object(ou.useMemo)((function(){return iu(a,u)}),[a,u]);return au.a.createElement(cu.Provider,{value:i},r)},Pu=function(e){return function(t){var n=du(),r=t.id,u=Object(ou.useState)({update:null,data:null}),o=$()(u,2),a=o[0],i=o[1];return Object(ou.useLayoutEffect)((function(){var e=function(t){var u;return Ht()(u=t.items).call(u,(function(e){return e.id===r}))&&new k.a((function(r){i((function(){return{update:function(t){n.off(mn.REQUEST_PRE_SEND,e),r(t)},data:t}}))}))};return r&&n.on(mn.REQUEST_PRE_SEND,e),function(){r&&n.off(mn.REQUEST_PRE_SEND,e)}}),[n,r]),au.a.createElement(e,nu()({},t,{updateRequest:a.update,requestData:a.data}))}},Nu=n("faye"),ju=n.n(Nu),Bu=function(e,t,n){return au.a.createElement("input",nu()({},e,{name:t.inputFieldName,type:"file",ref:n}))},Hu=Object(ou.memo)(Object(ou.forwardRef)((function(e,t){var n=e.container,r=e.noPortal,u=uu()(e,["container","noPortal"]),o=wu(),a=n&&1===n.nodeType;return R()(a||!Object(ae.d)(),"Uploady - Container for file input must be a valid dom element"),r?Bu(u,o,t):function(e,t,n,r,u){return e&&t?ju.a.createPortal(Bu(n,r,u),e):null}(n,a,u,o,t)}))),xu=function(e){var t=e.multiple,n=void 0===t||t,r=e.capture,u=e.accept,o=e.webkitdirectory,a=e.children,i=e.inputFieldContainer,c=e.customInput,l=e.fileInputId,d=e.noPortal,s=void 0!==d&&d,f=uu()(e,["multiple","capture","accept","webkitdirectory","children","inputFieldContainer","customInput","fileInputId","noPortal"]),p=c?null:i||(Object(ae.d)()?document.body:null),v=Object(ou.useRef)();return au.a.createElement(ku,nu()({},f,{inputRef:v}),c?null:au.a.createElement(Hu,{container:p,multiple:n,capture:r,accept:u,webkitdirectory:o,style:{display:"none"},ref:v,id:l,noPortal:s}),a)},Fu=n("pPxq"),Mu=n.n(Fu),qu=function(e){var t=e.closest("form"),n={filesParamName:e.getAttribute("name"),method:void 0,url:void 0};if(t){var r,u=t.getAttribute("method"),o=function(e){var t,n,r,u,o,a,i,c,l=window.location,d=e.getAttribute("action")||"";switch(d=d.replace(/\s/g,""),!0){case""===d:d=l.href;break;case Mu()(d).call(d,"/"):d=_()(t=_()(n="".concat(l.protocol,"//")).call(n,l.host)).call(t,d);break;case!/:\/\//.test(d):c=_()(r=de()(u=l.pathname.split("/")).call(u,0,-1)).call(r,"").join("/"),d=_()(o=_()(a=_()(i="".concat(l.protocol,"//")).call(i,l.host)).call(a,c)).call(o,d)}return d}(t);n.method=u?u.toUpperCase():void 0,n.url=o,T.debugLog(_()(r="Uploady.useFileInput: using custom input's parent form url ".concat(n.url," and method ")).call(r,n.method||""))}return n},zu=function(e){var t=du();t.setExternalFileInput(e),Object(ou.useEffect)((function(){if(e.current&&e.current.closest){var n=e.current,r=t.getOptions();if(!r.destination||!r.destination.url){var u=qu(n);t.setOptions({destination:u})}}}),[e,t])},Gu=xu;vu(je||!Object(ae.d)(),"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var Ku=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,u=e.parallel,o=uu()(e,["chunked","chunkSize","retries","parallel"]),a=Object(ou.useMemo)((function(){return je?function(e,t){var n=Et(e);return t?rr(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:u},e.enhancer):void 0}),[e.enhancer,t,n,r,u]);return au.a.createElement(Gu,nu()({},o,{enhancer:a}))},Xu=pu(ot.CHUNK_START,!1),Wu=pu(ot.CHUNK_FINISH,!1),Qu=Ku,Vu="Uploady - retry was not registered. Make sure you used the enhancer",Yu=function(){var e=du().getExtension(or);return R()(e,Vu),e.retry},Zu=function(){var e=du().getExtension(or);return R()(e,Vu),e.retryBatch},Ju=pu(ar,!1),$u=lr;vu(je,"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var eo=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,u=e.parallel,o=e.version,a=e.featureDetection,i=e.featureDetectionUrl,c=e.onFeaturesDetected,l=e.resume,d=e.deferLength,s=e.overrideMethod,f=e.sendDataOnCreate,p=e.storagePrefix,v=e.lockedRetryDelay,g=e.forgetOnSuccess,h=e.ignoreModifiedDateInStorage,b=uu()(e,["chunked","chunkSize","retries","parallel","version","featureDetection","featureDetectionUrl","onFeaturesDetected","resume","deferLength","overrideMethod","sendDataOnCreate","storagePrefix","lockedRetryDelay","forgetOnSuccess","ignoreModifiedDateInStorage"]),m=Object(ou.useMemo)((function(){return je?function(e,t){var n=$r(e);return t?rr(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:u,version:o,featureDetection:a,featureDetectionUrl:i,onFeaturesDetected:c,resume:l,deferLength:d,overrideMethod:s,sendDataOnCreate:f,storagePrefix:p,lockedRetryDelay:v,forgetOnSuccess:g,ignoreModifiedDateInStorage:h},e.enhancer):void 0}),[e.enhancer,t,n,r,u,o,a,i,c,l,d,s,f,p,v,g,h]);return au.a.createElement(Gu,nu()({},b,{enhancer:m}))},to=function(){var e=du().getExtension(Lr);return R()(e,"Uploady - tus was not registered. Make sure you used the enhancer"),function(){return Or(e.getOptions())}},no=eo,ro=function(e){return Object(ou.forwardRef)((function(t,n){var r=du().showFileUpload,u=t.id,o=t.className,a=t.text,i=t.children,c=t.extraProps,l=t.onClick,d=uu()(t,["id","className","text","children","extraProps","onClick"]),s=Object(ou.useRef)();s.current=d;var f=Object(ou.useCallback)((function(e){r(s.current),null==l||l(e)}),[r,s,l]);return au.a.createElement(e,nu()({ref:n,onClick:f,id:u,className:o,children:i||a||"Upload"},c))}))},uo=ro(Object(ou.forwardRef)((function(e,t){return au.a.createElement("button",nu()({ref:t},e))}))),oo=uo,ao=n("ALC1"),io=Object(ou.forwardRef)((function(e,t){var n=Object(ou.useRef)(null);Object(ou.useImperativeHandle)(t,(function(){return n.current}),[]);var r=du().upload,u=e.className,o=e.id,a=e.children,i=e.onDragOverClassName,c=e.dropHandler,l=e.htmlDirContentParams,d=e.extraProps,s=uu()(e,["className","id","children","onDragOverClassName","dropHandler","htmlDirContentParams","extraProps"]),f=Object(ou.useRef)();f.current=s;var p=Object(ou.useCallback)((function(){n.current&&i&&n.current.classList.remove(i)}),[i,n]),v=Object(ou.useCallback)((function(e){return c?k.a.resolve(c(e)):Object(ao.getFilesFromDragEvent)(e,l||{})}),[c,l]),g=Object(ou.useCallback)((function(e){v(e).then((function(e){r(e,f.current)}))}),[r,v,f]),h=Object(ou.useCallback)((function(e){e.preventDefault(),n.current&&i&&n.current.classList.add(i)}),[i,n]),b=Object(ou.useCallback)((function(e){e.preventDefault(),e.persist(),p(),g(e)}),[p,g]),m=Object(ou.useCallback)((function(){p()}),[p]),S=Object(ou.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p()}),[p]);return au.a.createElement("div",nu()({id:o,className:u,ref:n,onDragOver:h,onDrop:b,onDragLeave:m,onDragEnd:S},d),a)})),co=io,lo={IMAGE:"image",VIDEO:"video"},so=n("R8cT"),fo=n.n(so),po=Object(ae.b)({rememberPreviousBatches:!1,loadFirstOnly:!1,maxPreviewImageSize:2e7,maxPreviewVideoSize:1e8,fallbackUrl:"",imageMimeTypes:["image/jpeg","image/webp","image/gif","image/png","image/apng","image/bmp","image/x-icon","image/svg+xml"],videoMimeTypes:["video/mp4","video/webm","video/ogg"]}),vo=function(e,t){var n=Object(ae.e)(e)?e(t):e;return"string"==typeof n&&(n={url:n,name:t.name,type:lo.IMAGE}),n},go=function(e,t,n,r){var u;return t&&~ce()(t).call(t,r.type)&&(!n||r.size<=n)&&(u={url:fo.a.createObjectURL(r),name:r.name,type:e}),u},ho=function(e,t,n){var r,u,o=!1;if(e.file){var a=e.file;(r=function(e,t){var n=go(lo.IMAGE,t.imageMimeTypes,t.maxPreviewImageSize||0,e);return n||(n=go(lo.VIDEO,t.videoMimeTypes,t.maxPreviewVideoSize||0,e)),n}(e.file,t))||(r=vo(t.fallbackUrl,a),o=!0)}else r={url:e.url,name:e.url,type:lo.IMAGE};return r&&(u=Object(ae.e)(n)?n(e,r.url,r.type):n),r&&fe()(fe()({},r),{},{id:e.id,isFallback:o,props:u})},bo=function(e){var t,n=Object(ou.useState)([]),r=$()(n,2),u=r[0],o=r[1],a=(t=e,fe()(fe()({},po),t)),i=Object(ou.useCallback)((function(){o([])}),[]);return hu((function(t){var n,r,i,c,l,d=a.loadFirstOnly?de()(n=t.items).call(n,0,1):t.items,s=At()(r=Me()(d).call(d,(function(t){return ho(t,a,e.previewComponentProps)}))).call(r,Boolean);o(e.rememberPreviousBatches?(i=u,c=s,l=[],V()(c).call(c,(function(e){var t=w()(i).call(i,(function(t){return t.id===e.id}));~t?Ge()(i).call(i,t,1,e):l.push(e)})),_()(i).call(i,l)):s)})),{previews:u,clearPreviews:i}},mo=function(e){var t=e.PreviewComponent,n=e.previewMethodsRef,r=e.onPreviewsChanged,u=uu()(e,["PreviewComponent","previewMethodsRef","onPreviewsChanged"]),o=bo(u),a=o.previews,i=o.clearPreviews,c=Object(ou.useCallback)((function(t){var n=t.target,r=vo(e.fallbackUrl,n.src);r&&(n.src=r.url)}),[e.fallbackUrl]);return function(e,t,n,r){Object(ou.useImperativeHandle)(n,(function(){return{clear:t}}),[t]),Object(ou.useEffect)((function(){r&&r(e)}),[e,r])}(a,i,n,r),Me()(a).call(a,(function(e){var n=e.id,r=e.url,u=e.type,o=e.name,a=e.isFallback,i=e.props;return t?au.a.createElement(t,nu()({key:n+r,id:n,url:r,type:u,name:o,isFallback:a},i)):function(e,t,n,r){return e===lo.VIDEO?au.a.createElement("video",nu()({key:t,src:t,controls:!0},n)):au.a.createElement("img",nu()({key:t,onError:r,src:t},n))}(u,r,i,c)}))},So=mo,Eo=Object(ou.forwardRef)((function(e,t){var n=Object(ou.useRef)(null),r=du(),u=e.className,o=e.id,a=e.placeholder,i=e.uploadRef,c=e.validate,l=e.ignoreKeyPress,d=uu()(e,["className","id","placeholder","uploadRef","validate","ignoreKeyPress"]),s=Object(ou.useRef)();s.current=d,Object(ou.useImperativeHandle)(t,(function(){return n.current}),[]);var f=Object(ou.useCallback)((function(){var e=n.current,t=null==e?void 0:e.value;(c?c(t,e):t)&&r.upload(t,s.current)}),[r,c,s,n]),p=Object(ou.useCallback)((function(e){l||"Enter"!==e.key||f()}),[f,l]);return Object(ou.useImperativeHandle)(i,(function(){return f}),[f]),au.a.createElement("input",{type:"text",id:o,ref:n,className:u,onKeyPress:p,placeholder:a})})),yo=Eo,Oo=Eo},VPmE:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return v})),n.d(t,"i",(function(){return _})),n.d(t,"c",(function(){return A})),n.d(t,"a",(function(){return U})),n.d(t,"j",(function(){return B})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return H.a})),n.d(t,"g",(function(){return p}));var r=function(e){return"function"==typeof e},u=n("/FZm"),o=n.n(u),a=n("FLGM"),i=n.n(a),c=n("o+MX"),l=n.n(c),d=function(e,t,n){var r=!0,u=function(e){var t,n=l()(t=[]).call(t,e);return function(e){return i()(e).call(e,(function(e){return i()(n).call(n,(function(t){return e[t]})).join()}))}}(n);if(e&&t&&e.length===t.length){var a=u(e),c=u(t);r=!!o()(a).call(a,(function(e,t){return e!==c[t]}))}return!r},s=n("9yv6"),f=n.n(s),p=function(){return!0},v=function(e){return p()?e:f()(e)},g=n("RXMP"),h=n.n(g),b=n("OWCx"),m=n.n(b),S=n("+oHS"),E=n.n(S),y=n("6UaR"),O=n.n(y),R=n("zKQ6"),I=n.n(R),L=n("nhkr"),C=n.n(L),T=function(e){var t;return!!e&&"object"===C()(e)&&("Object"===(null===(t=I()(e))||void 0===t?void 0:t.constructor.name)||null===I()(e))},D=function(e){return T(e)||O()(e)},w=function(e,t){var n=E()(e);return t.withSymbols?l()(n).call(n,m()(e)):n},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(n){for(var r=arguments.length,u=new Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];return n&&u.length&&h()(u).call(u,(function(r){var u;r&&h()(u=w(r,e)).call(u,(function(u){var o=r[u];e.predicate&&!e.predicate(u,o)||(void 0!==o||e.undefinedOverwrites)&&(D(o)?(void 0!==n[u]&&T(n[u])||(n[u]=O()(o)?[]:{}),t(n[u],o)):n[u]=o)}))})),n};return t},_=A(),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;return D(e)?t(O()(e)?[]:{},e):e},k=n("ZbhI"),P=n.n(k),N=n("KYsz"),j=n.n(N),B=function(e,t){var n;return e&&j()(n=E()(e)).call(n,(function(n,r){return~P()(t).call(t,r)&&(n[r]=e[r]),n}),{})},H=n("n5N2")},cDcd:function(t,n){t.exports=e},faye:function(e,n){e.exports=t},n5N2:function(e,t,n){"use strict";var r=n("nhkr"),u=n.n(r);t.a=function(){return"object"===("undefined"==typeof window?"undefined":u()(window))&&!!window.document}},ytft:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"isDebugOn",(function(){return l})),n.d(t,"setDebug",(function(){return d})),n.d(t,"debugLog",(function(){return s}));var r,u=n("ZbhI"),o=n.n(u),a=n("10TY"),i=n("n5N2"),c=n("VPmE"),l=function(){var t;"boolean"!=typeof r&&(r=!Object(c.g)()&&e.env.DEBUG||Object(i.a)()&&("location"in window&&!!~o()(t=window.location.search).call(t,"rpldy_debug=true")||!0===window[a.b]));return r},d=function(e){Object(i.a)()&&(window[a.b]=e),r=!!e||null},s=function(){var e;l()&&(e=console).log.apply(e,arguments)}}.call(this,n("8oxB"))}})}));
//# sourceMappingURL=rpldy-all.umd.min.js.map