{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/TTB012_MB/FrontEnd/src/componentes/paginas/formatos/reffafotos.js\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport ReactDOM from \"react-dom\";\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { green, purple } from '@material-ui/core/colors';\nimport { Grid, Box } from '@material-ui/core/';\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport { withRouter } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport swal from \"sweetalert\";\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Input, TextField, Container, Typography } from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport { getData, Liberar } from '../../Functions/EstatusPatio';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport IconButton from '@material-ui/core/IconButton';\nimport { getFallos, sendFoto } from '../../Functions/Codigos_REFFA';\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\nimport { IoReturnUpBack } from \"react-icons/io5\";\nimport { IoReturnUpForwardOutline } from \"react-icons/io5\";\n\nconst REFFAF = () => {\n  const ColorButton = withStyles(theme => ({\n    root: {\n      color: theme.palette.getContrastText(green[500]),\n      backgroundColor: '#992830',\n      '&:hover': {\n        backgroundColor: '#BE1A25'\n      }\n    }\n  }))(Button);\n  const StyledTableCell = withStyles(theme => ({\n    head: {\n      backgroundColor: '#7D2027',\n      color: theme.palette.common.white,\n      size: 'small'\n    },\n    body: {\n      fontSize: 14\n    }\n  }))(TableCell);\n  const StyledTableRow = withStyles(theme => ({\n    root: {\n      '&:nth-of-type(odd)': {}\n    }\n  }))(TableRow);\n  const useStyles = makeStyles(theme => ({\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    table: {\n      minWidth: \"100%\"\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(3),\n      marginRight: theme.spacing(2)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n      backgroundColor: theme.palette.error.dark\n    }\n  }));\n\n  function createData(name) {\n    return {\n      name\n    };\n  }\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  function getCurrentDate(separator = '') {\n    let newDate = new Date();\n    let date = newDate.getDate();\n    let month = newDate.getMonth() + 1;\n    let year = newDate.getFullYear();\n    return `${year}${separator = \"-\"}${month < 10 ? `0${month}` : `${month}`}${separator = \"-\"}${date}`;\n  }\n\n  const fecha = getCurrentDate();\n  const ImagenRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [data1, setData1] = useState();\n  const [p, setp] = useState();\n  const imagenes = useRef([]);\n\n  const convertBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      };\n\n      fileReader.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  const handleChange = async e => {\n    let index = e.target.name;\n    const base64 = await convertBase64(e.target.files[0]);\n    console.log(base64);\n    imagenes.current[index] = base64;\n    setData1(base64);\n  };\n\n  const [AutobusEconomico, setautobus] = useState();\n  useEffect(() => {\n    getAuto();\n  }, []);\n\n  const getAuto = async () => {\n    var currentLocation = window.location.pathname;\n    if (currentLocation == \"/reffafoto\") if (localStorage.getItem(\"Autobus\")) {\n      setautobus(localStorage.getItem(\"Autobus\"));\n      const obj = {\n        URL: 'fallos/getFallos',\n        NumeroEconomico: localStorage.getItem(\"Autobus\")\n      };\n\n      const _data = await getFallos(obj);\n\n      if (_data.success) {\n        //console.log(\"HOLIS\")\n        setData(_data.data); //console.log(data)\n        //setPreload(false)\n      }\n\n      localStorage.removeItem(\"Autobus\");\n    } else swal(\"¡Error!\", 'Usa el boton \"anterior\" para seleccionar un formato.', \"warning\");\n  };\n\n  const Flag = useRef();\n\n  const Envio = async () => {\n    swal({\n      title: \"¿Está seguro que desea finalizar?\",\n      text: 'Al dar click en el botón \"siguiente\" no podrá volver a subir fotos para este formato.',\n      icon: \"warning\",\n      buttons: {\n        catch: {\n          text: \"Cancelar\",\n          value: \"cancel\"\n        },\n        catch1: {\n          text: \"Siguiente\",\n          value: \"siguiente\"\n        }\n      }\n    }).then(async value => {\n      if (value == \"siguiente\") {\n        await Computo();\n        history.replace(\"/reffaindice\");\n      }\n    });\n  };\n\n  const Computo = async () => {\n    /*swal({\n      title: \"¿Está seguro que desea finalizar?\",\n      text: 'Al dar click en el botón \"siguiente\" no podrá volver a subir fotos para este formato.',\n      icon: \"warning\",\n      buttons: {\n    catch: {\n    text: \"Cancelar\",\n    value: \"cancel\"\n    },\n    catch1: {\n    text: \"Siguiente\",\n    value: \"siguiente\"\n    },\n    }\n    })\n    .then((value) => {\n      if(value == \"siguiente\")\n      {*/\n    for (let i = 0; i < data.length; i++) {\n      const formData = {\n        NumeroEconomico: data[i].NumeroEconomico,\n        Foto: imagenes.current[i],\n        Codigo: data[i].Codigo,\n        Fecha: data[i].Fecha\n      };\n      console.log(\"Alo \" + i);\n      console.log(formData);\n\n      if (imagenes.current[i]) {\n        sendFoto(formData).then(response => {\n          console.log(\"Enviando...\");\n          console.log(\"Fin...\");\n        });\n      }\n    }\n    /*\n    history.replace(\"/reffaindice\")\n    swal(\"¡Felicidades!\",\"Tus datos se enviaron correctamente. \", \"success\")\n    }\n    });*/\n\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  }, \"Fotos para anexo formato REFFA del autobus \", AutobusEconomico), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 5\n    }\n  }, fecha), /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"customized table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 19\n    }\n  }, \"C\\xF3digo\"), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 19\n    }\n  }, \"Localizaci\\xF3n\"), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, \"Foto\"), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 19\n    }\n  }, \"Seleccionar foto\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, data.map((row, index) => /*#__PURE__*/React.createElement(StyledTableRow, {\n    key: row.NumeroEconomico,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, row.Codigo), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 21\n    }\n  }, row.Ubicaciones), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imagenes.current[index],\n    style: {\n      height: 100,\n      width: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(StyledTableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"originalFileName\",\n    type: \"file\",\n    inputProps: {\n      accept: 'image/*'\n    },\n    required: true,\n    label: \"Document\",\n    name: index,\n    inputRef: el => ImagenRef.current[index] = el,\n    onChange: handleChange,\n    size: \"small\",\n    variant: \"standard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 22\n    }\n  })))))), \"\\xA0\\xA0\"), /*#__PURE__*/React.createElement(Button, {\n    width: \"25%\",\n    align: \"left\",\n    variant: \"contained\",\n    color: \"secondary\",\n    style: {\n      backgroundColor: \"#CC353F\"\n    },\n    className: classes.submit,\n    type: \"submit\",\n    onClick: () => {\n      history.push('/reffaindice');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IoReturnUpBack, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    width: \"25%\",\n    align: \"right\",\n    style: {\n      float: \"right\",\n      backgroundColor: \"#CC353F\"\n    },\n    variant: \"contained\",\n    color: \"secondary\",\n    className: classes.submit,\n    onClick: Envio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IoReturnUpForwardOutline, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  })));\n};\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render( /*#__PURE__*/React.createElement(REFFAF, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 17\n  }\n}), rootElement);\nexport default withRouter(REFFAF);","map":{"version":3,"sources":["/home/ubuntu/TTB012_MB/FrontEnd/src/componentes/paginas/formatos/reffafotos.js"],"names":["React","useRef","useState","useEffect","ReactDOM","withStyles","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","green","purple","Grid","Box","List","ListItem","ListItemIcon","ListItemText","withRouter","useHistory","swal","MenuItem","Input","TextField","Container","Typography","Select","getData","Liberar","PhotoCamera","IconButton","getFallos","sendFoto","AddAPhotoIcon","IoReturnUpBack","IoReturnUpForwardOutline","REFFAF","ColorButton","theme","root","color","palette","getContrastText","backgroundColor","StyledTableCell","head","common","white","size","body","fontSize","StyledTableRow","useStyles","paper","marginTop","spacing","display","flexDirection","table","minWidth","form","width","marginRight","submit","margin","error","dark","createData","name","classes","history","getCurrentDate","separator","newDate","Date","date","getDate","month","getMonth","year","getFullYear","fecha","ImagenRef","data","setData","data1","setData1","p","setp","imagenes","convertBase64","file","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","handleChange","e","index","target","base64","files","console","log","current","AutobusEconomico","setautobus","getAuto","currentLocation","window","location","pathname","localStorage","getItem","obj","URL","NumeroEconomico","_data","success","removeItem","Flag","Envio","title","text","icon","buttons","catch","value","catch1","then","Computo","replace","i","length","formData","Foto","Codigo","Fecha","response","map","row","Ubicaciones","height","accept","el","push","float","rootElement","document","getElementById","render"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport ReactDOM from \"react-dom\";\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { green, purple } from '@material-ui/core/colors';\nimport {Grid,Box}  from '@material-ui/core/';\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport { withRouter } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport swal from \"sweetalert\";\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Input, TextField, Container, Typography } from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport {getData, Liberar} from '../../Functions/EstatusPatio';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport IconButton from '@material-ui/core/IconButton';\nimport {getFallos,sendFoto} from '../../Functions/Codigos_REFFA'\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';    \nimport {IoReturnUpBack} from \"react-icons/io5\";\nimport {IoReturnUpForwardOutline} from \"react-icons/io5\"; \n\nconst REFFAF = () => {\n\n  const ColorButton = withStyles((theme) => ({\n        root: {\n          color: theme.palette.getContrastText(green[500]),\n          backgroundColor: '#992830',\n          '&:hover': {\n            backgroundColor: '#BE1A25',\n          },\n        },\n      }))(Button);\n\n      const StyledTableCell = withStyles((theme) => ({\n        head: {\n          backgroundColor: '#7D2027',\n          color: theme.palette.common.white,\n          size:  'small',\n        \n        },\n        body: {\n          fontSize: 14,\n        },\n      }))(TableCell);\n      \n      const StyledTableRow = withStyles((theme) => ({\n        root: {\n          '&:nth-of-type(odd)': {\n            \n          },\n        },\n      }))(TableRow);\n      \n      const useStyles = makeStyles((theme) => ({\n        paper: {\n          marginTop: theme.spacing(8),\n          display: 'flex',\n          flexDirection: 'column',\n          \n        },\n        table: {\n          minWidth: \"100%\",\n        },\n        form: {\n          width: '100%', // Fix IE 11 issue.\n          marginTop: theme.spacing(3),\n        marginRight: theme.spacing(2),\n        },\n        submit: {\n          margin: theme.spacing(3, 0, 2),\n          backgroundColor: theme.palette.error.dark,\n        },\n      }));\n      function createData(name) {\n        return { name};\n      }\n      \n      const classes = useStyles();\n      const history = useHistory()\n      function getCurrentDate(separator=''){\n\n        let newDate = new Date()\n        let date = newDate.getDate();\n        let month = newDate.getMonth() + 1;\n        let year = newDate.getFullYear();\n        \n        return `${year}${separator=\"-\"}${month<10?`0${month}`:`${month}`}${separator=\"-\"}${date}`\n      }\n      const fecha = getCurrentDate();\n\n      const ImagenRef = useRef([])\n\n      const [data, setData] = useState([]);\n      const [data1, setData1] = useState();\n      const [p,setp] = useState()\n      const imagenes = useRef([])\n\n\t  const convertBase64 = (file) => {\n\t    return new Promise((resolve, reject) => {\n\t      const fileReader = new FileReader();\n\t      fileReader.readAsDataURL(file)\n\t      fileReader.onload = () => {\n\t        resolve(fileReader.result);\n\t      }\n\t      fileReader.onerror = (error) => {\n\t        reject(error);\n\t      }\n\t    })\n\t  }\n\n      const handleChange = async(e) =>{\n        let index = e.target.name\n        const base64 = await convertBase64(e.target.files[0])\n    \tconsole.log(base64)\n    \timagenes.current[index] = base64\n    \tsetData1(base64)\n      }\n\n\tconst [AutobusEconomico, setautobus] = useState(); \n      useEffect(() => {getAuto()},[]);\n      const getAuto = async () => {\n      \tvar currentLocation = window.location.pathname;\n      \tif(currentLocation == \"/reffafoto\")\n      \tif(localStorage.getItem(\"Autobus\"))\n      \t{\n      \t\tsetautobus(localStorage.getItem(\"Autobus\"))\n\t      \tconst obj = {\n\t      \t\tURL: 'fallos/getFallos',\n\t      \t\tNumeroEconomico: localStorage.getItem(\"Autobus\")\n\t      \t}\n\t        const _data = await getFallos(obj)\n\t        if (_data.success)\n\t        {\n\t\t         //console.log(\"HOLIS\")\n\t          setData(_data.data)\n\t          //console.log(data)\n\t          //setPreload(false)\n\t        }\n\t      \tlocalStorage.removeItem(\"Autobus\")\n\t      }\n\t      else \n\t\t\tswal(\"¡Error!\",'Usa el boton \"anterior\" para seleccionar un formato.', \"warning\")\n      }\nconst Flag = useRef()\n\n\nconst Envio = async() => {\n\tswal({\n            title: \"¿Está seguro que desea finalizar?\",\n            text: 'Al dar click en el botón \"siguiente\" no podrá volver a subir fotos para este formato.',\n            icon: \"warning\",\n            buttons: {\n                catch: {\n                        text: \"Cancelar\",\n                        value: \"cancel\"\n                        },\n                catch1: {\n                        text: \"Siguiente\",\n                        value: \"siguiente\"\n                        },\n                }\n          })\n          .then(async(value) => {\n            if(value == \"siguiente\")\n            {\n\t\tawait Computo()\n\t\thistory.replace(\"/reffaindice\")\n\t    }\n\t});\n}\n      const Computo =  async() => {\n          /*swal({\n            title: \"¿Está seguro que desea finalizar?\",\n            text: 'Al dar click en el botón \"siguiente\" no podrá volver a subir fotos para este formato.',\n            icon: \"warning\",\n            buttons: {\n\t\tcatch: {\n\t\t\ttext: \"Cancelar\",\n\t\t\tvalue: \"cancel\"\n\t\t\t},\n\t\tcatch1: {\n\t\t\ttext: \"Siguiente\",\n\t\t\tvalue: \"siguiente\"\n\t\t\t},\n\t\t}\n          })\n          .then((value) => {\n            if(value == \"siguiente\")\n            {*/\n          for(let i = 0; i < data.length; i++)\n              {\n                const formData = {\n                  NumeroEconomico: data[i].NumeroEconomico,\n                  Foto: imagenes.current[i],\n                  Codigo: data[i].Codigo,\n                  Fecha: data[i].Fecha,\n                }\n                console.log(\"Alo \" + i)\n                console.log(formData)\n                if(imagenes.current[i])\n                {\n                  sendFoto(formData).then(response => {\n                    console.log(\"Enviando...\")\n                    console.log(\"Fin...\")  \n                  })\n                }\n              }/*\n              history.replace(\"/reffaindice\")\n              swal(\"¡Felicidades!\",\"Tus datos se enviaron correctamente. \", \"success\")\n\t    }\n\t    });*/\n      }\n\n\n    return (\n    <Container component=\"main\">\n\n    <Typography component=\"h1\" variant=\"h5\" align=\"left\">\n      Fotos para anexo formato REFFA del autobus {AutobusEconomico}\n    </Typography>\n    <Typography component=\"h1\" variant=\"h5\" align=\"left\">\n      {fecha}\n    </Typography>\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"customized table\">\n              <TableHead>\n                <TableRow>\n                  <StyledTableCell align=\"center\">Código</StyledTableCell>\n                  <StyledTableCell align=\"center\">Localización</StyledTableCell>\n                  <StyledTableCell align=\"center\">Foto</StyledTableCell>\n                  <StyledTableCell align=\"center\">Seleccionar foto</StyledTableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n              {data.map((row,index) => (\n                  <StyledTableRow key={row.NumeroEconomico}>\n                    <StyledTableCell align=\"center\" component=\"th\" scope=\"row\">\n                    {row.Codigo}\n                    </StyledTableCell>\n                    <StyledTableCell align=\"center\">{row.Ubicaciones}</StyledTableCell>\n                    <StyledTableCell align=\"center\">\n                    <img src={imagenes.current[index]} style={{\n\t\t\t          height: 100,\n\t\t\t          width: 200\n\t\t\t        }}/>\n                    </StyledTableCell>\n                    <StyledTableCell align=\"center\">\n                     <TextField\n\t\t                id=\"originalFileName\"\n\t\t                type=\"file\"\n\t\t                inputProps={{ accept: 'image/*' }}\n\t\t                required\n\t\t                label=\"Document\"\n                  \n\t\t                name={index}\n\t\t                inputRef={(el) => (ImagenRef.current[index] = el)}\n\t\t                onChange={handleChange}\n\t\t                size=\"small\"\n\t\t                variant=\"standard\"\n\t\t              >\n\t\t\t\n\t\t     </TextField>\n                     </StyledTableCell>                 \n                  </StyledTableRow>\n                ))}\n              </TableBody>\n              </Table>\n      &nbsp;&nbsp;\n    </TableContainer>\n    <Button\n            width= \"25%\"\n            align= \"left\"\n            variant=\"contained\"\n            color=\"secondary\"\n            style={{backgroundColor:\"#CC353F\"}}\n            className={classes.submit}\n            type=\"submit\"\n            onClick={()=> {\n                history.push('/reffaindice')\n            }}>\n          <IoReturnUpBack size={20}/>\n    </Button>\n    <Button\n\t    type=\"submit\"\n\t    width= \"25%\"\n\t    align= \"right\"\n\t\tstyle={{float:\"right\",backgroundColor:\"#CC353F\"}}\n\t    variant=\"contained\"\n\t    color=\"secondary\"\n\t    className={classes.submit}\n\t    onClick={Envio}\n    >\n          <IoReturnUpForwardOutline size={20}/>\n    </Button>\n    </Container>\n    );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<REFFAF />, rootElement);\n \nexport default withRouter(REFFAF);\n"]},"metadata":{},"sourceType":"module"}