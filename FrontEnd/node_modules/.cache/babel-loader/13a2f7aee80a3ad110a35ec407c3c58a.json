{"ast":null,"code":"function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useCallback, useEffect, useImperativeHandle } from \"react\";\nimport usePreviewsLoader from \"./usePreviewsLoader\";\nimport { getFallbackUrl } from \"./utils\";\nimport { PREVIEW_TYPES } from \"./consts\";\n\nvar showBasicPreview = function (type, url, previewProps, onImgError) {\n  return type === PREVIEW_TYPES.VIDEO ? /*#__PURE__*/React.createElement(\"video\", _extends({\n    key: url,\n    src: url,\n    controls: true\n  }, previewProps)) : /*#__PURE__*/React.createElement(\"img\", _extends({\n    key: url,\n    onError: onImgError,\n    src: url\n  }, previewProps));\n};\n\nvar usePreviewMethods = function (previews, clearPreviews, previewMethodsRef, onPreviewsChanged) {\n  useImperativeHandle(previewMethodsRef, function () {\n    return {\n      clear: clearPreviews\n    };\n  }, [clearPreviews]);\n  useEffect(function () {\n    if (onPreviewsChanged) {\n      onPreviewsChanged(previews);\n    }\n  }, [previews, onPreviewsChanged]);\n};\n\nvar UploadPreview = function (props) {\n  var PreviewComponent = props.PreviewComponent,\n      previewMethodsRef = props.previewMethodsRef,\n      onPreviewsChanged = props.onPreviewsChanged,\n      previewOptions = _objectWithoutProperties(props, [\"PreviewComponent\", \"previewMethodsRef\", \"onPreviewsChanged\"]);\n\n  var _usePreviewsLoader = usePreviewsLoader(previewOptions),\n      previews = _usePreviewsLoader.previews,\n      clearPreviews = _usePreviewsLoader.clearPreviews;\n\n  var onImagePreviewLoadError = useCallback(function (e) {\n    var img = e.target;\n    var fallback = getFallbackUrl(props.fallbackUrl, img.src);\n\n    if (fallback) {\n      img.src = fallback.url;\n    }\n  }, [props.fallbackUrl]);\n  usePreviewMethods(previews, clearPreviews, previewMethodsRef, onPreviewsChanged);\n  return previews.map(function (data) {\n    var id = data.id,\n        url = data.url,\n        type = data.type,\n        name = data.name,\n        isFallback = data.isFallback,\n        previewProps = data.props;\n    return PreviewComponent ? /*#__PURE__*/React.createElement(PreviewComponent, _extends({\n      key: id + url,\n      id: id,\n      url: url,\n      type: type,\n      name: name,\n      isFallback: isFallback\n    }, previewProps)) : showBasicPreview(type, url, previewProps, onImagePreviewLoadError);\n  });\n};\n\nexport default UploadPreview;","map":{"version":3,"sources":["/home/ubuntu/TTB012_MB/FrontEnd/node_modules/@rpldy/upload-preview/lib/esm/UploadPreview.js"],"names":["_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_extends","assign","arguments","hasOwnProperty","apply","React","useCallback","useEffect","useImperativeHandle","usePreviewsLoader","getFallbackUrl","PREVIEW_TYPES","showBasicPreview","type","url","previewProps","onImgError","VIDEO","createElement","src","controls","onError","usePreviewMethods","previews","clearPreviews","previewMethodsRef","onPreviewsChanged","clear","UploadPreview","props","PreviewComponent","previewOptions","_usePreviewsLoader","onImagePreviewLoadError","e","img","fallback","fallbackUrl","map","data","id","name","isFallback"],"mappings":"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","sourcesContent":["function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useCallback, useEffect, useImperativeHandle } from \"react\";\nimport usePreviewsLoader from \"./usePreviewsLoader\";\nimport { getFallbackUrl } from \"./utils\";\nimport { PREVIEW_TYPES } from \"./consts\";\n\nvar showBasicPreview = function (type, url, previewProps, onImgError) {\n  return type === PREVIEW_TYPES.VIDEO ? /*#__PURE__*/React.createElement(\"video\", _extends({\n    key: url,\n    src: url,\n    controls: true\n  }, previewProps)) : /*#__PURE__*/React.createElement(\"img\", _extends({\n    key: url,\n    onError: onImgError,\n    src: url\n  }, previewProps));\n};\n\nvar usePreviewMethods = function (previews, clearPreviews, previewMethodsRef, onPreviewsChanged) {\n  useImperativeHandle(previewMethodsRef, function () {\n    return {\n      clear: clearPreviews\n    };\n  }, [clearPreviews]);\n  useEffect(function () {\n    if (onPreviewsChanged) {\n      onPreviewsChanged(previews);\n    }\n  }, [previews, onPreviewsChanged]);\n};\n\nvar UploadPreview = function (props) {\n  var PreviewComponent = props.PreviewComponent,\n      previewMethodsRef = props.previewMethodsRef,\n      onPreviewsChanged = props.onPreviewsChanged,\n      previewOptions = _objectWithoutProperties(props, [\"PreviewComponent\", \"previewMethodsRef\", \"onPreviewsChanged\"]);\n\n  var _usePreviewsLoader = usePreviewsLoader(previewOptions),\n      previews = _usePreviewsLoader.previews,\n      clearPreviews = _usePreviewsLoader.clearPreviews;\n\n  var onImagePreviewLoadError = useCallback(function (e) {\n    var img = e.target;\n    var fallback = getFallbackUrl(props.fallbackUrl, img.src);\n\n    if (fallback) {\n      img.src = fallback.url;\n    }\n  }, [props.fallbackUrl]);\n  usePreviewMethods(previews, clearPreviews, previewMethodsRef, onPreviewsChanged);\n  return previews.map(function (data) {\n    var id = data.id,\n        url = data.url,\n        type = data.type,\n        name = data.name,\n        isFallback = data.isFallback,\n        previewProps = data.props;\n    return PreviewComponent ? /*#__PURE__*/React.createElement(PreviewComponent, _extends({\n      key: id + url,\n      id: id,\n      url: url,\n      type: type,\n      name: name,\n      isFallback: isFallback\n    }, previewProps)) : showBasicPreview(type, url, previewProps, onImagePreviewLoadError);\n  });\n};\n\nexport default UploadPreview;"]},"metadata":{},"sourceType":"module"}